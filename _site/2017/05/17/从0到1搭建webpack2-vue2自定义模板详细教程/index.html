<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>从0到1搭建webpack2+vue2自定义模板详细教程 | 小青年博客 | 看似寻常最奇崛，成如容易却艰辛。</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="vue.js,webpack,vue-cli">
    <meta name="description" content="前言webpack2和vue2已经不是新鲜东西了，满大街的文章在讲解webpack和vue，但是很多内容写的不是很详细，对于很多个性化配置还是需要自己过一遍文档。Vue官方提供了多个vue-templates，基于vue-cli用的最多，不过对于很多人来说，vue-cli 的配置还是过于复杂，对于我们了解细节实现不是很好，所以想自己从零开始搭建一个模板工程，也顺便重新认识一下webpack和vue">
<meta name="keywords" content="vue.js,webpack,vue-cli">
<meta property="og:type" content="article">
<meta property="og:title" content="从0到1搭建webpack2+vue2自定义模板详细教程">
<meta property="og:url" content="https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/index.html">
<meta property="og:site_name" content="小青年博客">
<meta property="og:description" content="前言webpack2和vue2已经不是新鲜东西了，满大街的文章在讲解webpack和vue，但是很多内容写的不是很详细，对于很多个性化配置还是需要自己过一遍文档。Vue官方提供了多个vue-templates，基于vue-cli用的最多，不过对于很多人来说，vue-cli 的配置还是过于复杂，对于我们了解细节实现不是很好，所以想自己从零开始搭建一个模板工程，也顺便重新认识一下webpack和vue">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1945738-f1379447d7a0417c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-05-17T09:07:39.783Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从0到1搭建webpack2+vue2自定义模板详细教程">
<meta name="twitter:description" content="前言webpack2和vue2已经不是新鲜东西了，满大街的文章在讲解webpack和vue，但是很多内容写的不是很详细，对于很多个性化配置还是需要自己过一遍文档。Vue官方提供了多个vue-templates，基于vue-cli用的最多，不过对于很多人来说，vue-cli 的配置还是过于复杂，对于我们了解细节实现不是很好，所以想自己从零开始搭建一个模板工程，也顺便重新认识一下webpack和vue">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/1945738-f1379447d7a0417c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
    
        <link rel="alternate" type="application/atom+xml" title="小青年博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">赵梦欢</h5>
          <a href="mailto:zhaomenghuan@foxmail.com" title="zhaomenghuan@foxmail.com" class="mail">zhaomenghuan@foxmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                首页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://zhaomenghuan.github.io/content.json" target="_blank" >
                <i class="icon icon-lg icon-th-large"></i>
                API
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zhaomenghuan" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                GitHub
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://segmentfault.com/u/zhaomenghuan" target="_blank" >
                <i class="icon icon-lg icon-link"></i>
                Segmentfault
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.jianshu.com/u/de1f0b8eaf18" target="_blank" >
                <i class="icon icon-lg icon-book"></i>
                简书
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">从0到1搭建webpack2+vue2自定义模板详细教程</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">从0到1搭建webpack2+vue2自定义模板详细教程</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-05-17T08:53:48.000Z" itemprop="datePublished" class="page-time">
  2017-05-17
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/vue-js-node-js全栈开发/">vue.js+node.js全栈开发</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#webpack-核心概念"><span class="post-toc-number">2.</span> <span class="post-toc-text">webpack 核心概念</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#入口-Entry"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">入口(Entry)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#出口-Output"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">出口(Output)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#加载器-Loaders"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">加载器(Loaders)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CSS样式分离"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">CSS样式分离</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#资源路径处理"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">资源路径处理</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#插件-Plugins"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">插件(Plugins)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#生产环境构建"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">生产环境构建</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#模块热替换"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">模块热替换</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#动态生成-html-文件"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">动态生成 html 文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#提取-CSS-文件"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">提取 CSS 文件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#clean-webpack-plugin"><span class="post-toc-number">2.5.5.</span> <span class="post-toc-text">clean-webpack-plugin</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#解析-Resolve"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">解析(Resolve)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#webpack-中如何使用-es6-es8"><span class="post-toc-number">3.</span> <span class="post-toc-text">webpack 中如何使用 es6 ~ es8?</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ECMAScript-标准建立的过程"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">ECMAScript 标准建立的过程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装-Babel"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">安装 Babel</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Babel-预设-presets"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Babel 预设(presets)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-preset-env"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">babel-preset-env</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-preset-es2015"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">babel-preset-es2015</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-preset-es2016"><span class="post-toc-number">3.3.3.</span> <span class="post-toc-text">babel-preset-es2016</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-preset-es2017"><span class="post-toc-number">3.3.4.</span> <span class="post-toc-text">babel-preset-es2017</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-preset-latest"><span class="post-toc-number">3.3.5.</span> <span class="post-toc-text">babel-preset-latest</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#stage-x-stage-0-1-2-3-4"><span class="post-toc-number">3.3.6.</span> <span class="post-toc-text">stage-x(stage-0/1/2/3/4)</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Babel-插件-plugins"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">Babel 插件(plugins)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-polyfill-与-babel-runtime"><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">babel-polyfill 与 babel-runtime</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#babel-register"><span class="post-toc-number">3.4.2.</span> <span class="post-toc-text">babel-register</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#webpack-中如何使用-vue"><span class="post-toc-number">4.</span> <span class="post-toc-text">webpack 中如何使用 vue?</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Vue2-dist-目录下各个文件的区别"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">Vue2 dist 目录下各个文件的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#vue-loader"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">vue-loader</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#pug-模板"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">pug 模板</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PostCSS"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">PostCSS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#cssnext"><span class="post-toc-number">4.4.1.</span> <span class="post-toc-text">cssnext</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#webpack2-开启-eslint-校验"><span class="post-toc-number">5.</span> <span class="post-toc-text">webpack2 开启 eslint 校验</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建属于你的模板"><span class="post-toc-number">6.</span> <span class="post-toc-text">创建属于你的模板</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-number">7.</span> <span class="post-toc-text">参考</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-从0到1搭建webpack2-vue2自定义模板详细教程"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">从0到1搭建webpack2+vue2自定义模板详细教程</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-05-17 16:53:48" datetime="2017-05-17T08:53:48.000Z"  itemprop="datePublished">2017-05-17</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/vue-js-node-js全栈开发/">vue.js+node.js全栈开发</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>webpack2和vue2已经不是新鲜东西了，满大街的文章在讲解webpack和vue，但是很多内容写的不是很详细，对于很多个性化配置还是需要自己过一遍文档。Vue官方提供了多个<a href="https://github.com/vuejs-templates" target="_blank" rel="external">vue-templates</a>，基于vue-cli用的最多，不过对于很多人来说，vue-cli 的配置还是过于复杂，对于我们了解细节实现不是很好，所以想自己从零开始搭建一个模板工程，也顺便重新认识一下webpack和vue工程化。</p>
<h2 id="webpack-核心概念"><a href="#webpack-核心概念" class="headerlink" title="webpack 核心概念"></a>webpack 核心概念</h2><blockquote>
<p>Webpack 是当下最热门的前端资源模块化管理和打包工具。它可以将许多松散的模块按照依赖和规则打包成符合生产环境部署的前端资源。还可以将按需加载的模块进行代码分隔，等到实际需要的时候再异步加载。通过 loader 的转换，任何形式的资源都可以视作模块，比如 CommonJs 模块、 AMD 模块、 ES6 模块、CSS、图片、 JSON、Coffeescript、 LESS 等。</p>
</blockquote>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/1945738-f1379447d7a0417c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>官方网站：<a href="https://webpack.js.org/" target="_blank" rel="external">https://webpack.js.org/</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>在开始前，先要确认你已经安装<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js</a>的最新版本。使用 Node.js 最新的 LTS 版本，是理想的起步。使用旧版本，你可能遇到各种问题，因为它们可能缺少 webpack 功能或缺少相关 package 包。</p>
<p>本地局部安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 安装 latest release</div><div class="line">npm install --save-dev webpack</div><div class="line"># 简写模式</div><div class="line">npm install -D webpack</div><div class="line"># 安装特定版本</div><div class="line">npm install --save-dev webpack@&lt;version&gt;</div></pre></td></tr></table></figure></p>
<p>全局安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g webpack</div></pre></td></tr></table></figure></p>
<p>注意：不推荐全局安装 webpack。这会锁定 webpack 到指定版本，并且在使用不同的 webpack 版本的项目中可能会导致构建失败。但是全局安装可以在命令行调用 webpack 命令。</p>
<p>【补充】npm install 安装模块参数说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-g, --global 全局安装（global）</div><div class="line">-S, --save 安装包信息将加入到dependencies（生产阶段的依赖）</div><div class="line">-D, --save-dev 安装包信息将加入到devDependencies（开发阶段的依赖），所以开发阶段一般使用它</div><div class="line">-O, --save-optional 安装包信息将加入到optionalDependencies（可选阶段的依赖）</div><div class="line">-E, --save-exact 精确安装指定模块版本</div></pre></td></tr></table></figure></p>
<p>npm 相关的更多命令参考这篇文章：<a href="https://zhaomenghuan.github.io/2016/11/15/npm%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/">npm 常用命令详解</a></p>
<p>然后在根目录下创建一个 <code>webpack.config.js</code> 文件后，你可以通过配置定义webpack的相关操作。</p>
<h3 id="入口-Entry"><a href="#入口-Entry" class="headerlink" title="入口(Entry)"></a>入口(Entry)</h3><blockquote>
<p>入口起点告诉 webpack 从哪里开始，并遵循着依赖关系图表知道要打包什么。可以将您应用程序的入口起点认为是根上下文(contextual root)或 app 第一个启动文件。</p>
</blockquote>
<p><strong>单个入口（简写）语法：</strong><br>用法：<code>entry: string|Array&lt;string&gt;</code></p>
<p>webpack.config.js：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry: &apos;./src/main.js&apos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>对象语法：</strong><br>用法：<code>entry: {[entryChunkName: string]: string|Array&lt;string&gt;}</code></p>
<p>webpack.config.js：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    app: &apos;./src/main.js&apos;,</div><div class="line">    vendor: [&apos;vue&apos;]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这里我们将vue作为库vendor打包，业务逻辑代码作为app打包，实现了多个入口，同时也可以将多个页面分开打包。</p>
<p>多页面应用程序通常使用对象语法构建。对象语法是<strong>“可扩展的 webpack 配置”</strong>，可重用并且可以与其他配置组合使用。这是一种流行的技术，用于将关注点(concern)从环境(environment)、构建目标(build target)、运行时(runtime)中分离。然后使用专门的工具（如<a href="https://github.com/survivejs/webpack-merge" target="_blank" rel="external">webpack-merge</a>）将它们合并。</p>
<p>注：vue-cli 生成的模板中build文件夹下有四个配置文件：</p>
<ul>
<li><a href="https://github.com/vuejs-templates/webpack/blob/master/template/build/webpack.base.conf.js" target="_blank" rel="external">webpack.base.conf.js</a>：基本配置</li>
<li><a href="https://github.com/vuejs-templates/webpack/blob/master/template/build/webpack.dev.conf.js" target="_blank" rel="external">webpack.dev.conf.js</a>：开发阶段配置</li>
<li><a href="https://github.com/vuejs-templates/webpack/blob/master/template/build/webpack.prod.conf.js" target="_blank" rel="external">webpack.prod.conf.js</a>：准生产阶段配置</li>
<li><a href="https://github.com/vuejs-templates/webpack/blob/master/template/build/webpack.test.conf.js" target="_blank" rel="external">webpack.test.conf.js</a>：测试配置</li>
</ul>
<p>后三个文件通过webpack-merge插件合并了基本配置，将不同环境下的配置拆分多个文件，这样更加方便管理。</p>
<h3 id="出口-Output"><a href="#出口-Output" class="headerlink" title="出口(Output)"></a>出口(Output)</h3><blockquote>
<p>将所有的资源(assets)归拢在一起后，还需要告诉 webpack 在哪里打包应用程序。webpack 的 output 属性描述了如何处理归拢在一起的代码(bundled code)。output 选项控制 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个入口起点，但只指定一个输出配置。</p>
</blockquote>
<p>在 webpack 中配置output 属性的最低要求是，将它的值设置为一个对象，包括以下两点：</p>
<ul>
<li><a href="https://doc.webpack-china.org/concepts/output/#output-filename" target="_blank" rel="external">output.filename</a>：编译文件的文件名；</li>
<li><a href="https://doc.webpack-china.org/concepts/output/#output-path" target="_blank" rel="external">output.path</a>对应一个<strong>绝对路径</strong>，此路径是你希望一次性打包的目录。</li>
</ul>
<p><strong>单个入口：</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">  entry: &apos;./src/app.js&apos;,</div><div class="line">  output: &#123;</div><div class="line">    filename: &apos;bundle.js&apos;,</div><div class="line">    path: path.resolve(__dirname, &apos;build&apos;)  //__dirname + &apos;/build&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>多个入口：</strong><br>如果你的配置创建了多个 “chunk”（例如使用多个入口起点或使用类似CommonsChunkPlugin 的插件），你应该使用以下的替换方式来确保每个文件名都不重复。</p>
<ul>
<li>[name] 被 chunk 的 name 替换。</li>
<li>[hash] 被 compilation 生命周期的 hash 替换。</li>
<li>[chunkhash] 被 chunk 的 hash 替换。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    app: &apos;./src/main.js&apos;,</div><div class="line">    vendor: [&apos;vue&apos;]</div><div class="line">  &#125;,</div><div class="line">  output: &#123;</div><div class="line">    filename: &apos;[name].js&apos;,</div><div class="line">    path: path.resolve(__dirname, &apos;build&apos;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 写入到硬盘：./build/app.js, ./build/vendor.js</div></pre></td></tr></table></figure>
<h3 id="加载器-Loaders"><a href="#加载器-Loaders" class="headerlink" title="加载器(Loaders)"></a>加载器(Loaders)</h3><blockquote>
<p>loader 用于对模块的源代码进行转换。loader 可以使你在 require() 或”加载”模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript，或将内联图像转换为 data URL。loader 甚至允许你在 JavaScript 中 require() CSS文件！</p>
</blockquote>
<p>在你的应用程序中，有三种方式使用 loader：</p>
<ul>
<li><a href="https://doc.webpack-china.org/concepts/loaders/#-webpack-config-js" target="_blank" rel="external">通过webpack.config.js配置</a></li>
<li><a href="https://doc.webpack-china.org/concepts/loaders/#-require" target="_blank" rel="external">使用 require 语句中显示使用</a></li>
<li><a href="https://doc.webpack-china.org/concepts/loaders/#-cli" target="_blank" rel="external">通过 webpack CLI</a></li>
</ul>
<p>这里我们主要说明一下使用webpack.config.js配置，使用loader需要在module的rules下配置相应的规则，以css-loader的<strong>webpack.config.js</strong>为例说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123; </div><div class="line">    module: &#123; </div><div class="line">        rules: [</div><div class="line">            &#123;test: /\.css$/, use: &apos;css-loader&apos;&#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>这三种配置方式等效：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;test: /\.css$/, use: &apos;css-loader&apos;&#125;</div><div class="line">&#123;test: /\.css$/, loader: &apos;css-loader&apos;，options: &#123; modules: true &#125;&#125;</div><div class="line">&#123;test: /\.css$/, use: &#123;</div><div class="line">    loader: &apos;css-loader&apos;,</div><div class="line">    options: &#123;</div><div class="line">      modules: true</div><div class="line">    &#125;</div><div class="line">&#125;&#125;</div></pre></td></tr></table></figure></p>
<p>注：loader/query可以和options可以在同一级使用，但是不要使用use和options在同一级使用。</p>
<h4 id="CSS样式分离"><a href="#CSS样式分离" class="headerlink" title="CSS样式分离"></a>CSS样式分离</h4><p>为了用 webpack 对 CSS 文件进行打包，你可以像<a href="https://doc.webpack-china.org/concepts/modules" target="_blank" rel="external">其它模块</a>一样将 CSS 引入到你的 JavaScript 代码中，同时用css-loader(像 JS 模块一样输出 CSS)，也可以选择使用ExtractTextWebpackPlugin(将打好包的 CSS 提出出来并输出成 CSS 文件)。</p>
<p>引入 CSS：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &apos;bootstrap/dist/css/bootstrap.css&apos;;</div></pre></td></tr></table></figure></p>
<p>安装css-loader和style-loader：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev css-loader style-loader</div></pre></td></tr></table></figure></p>
<p>在 webpack.config.js 中配置如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">    module: &#123;</div><div class="line">        rules: [&#123;</div><div class="line">            test: /\.css$/,</div><div class="line">            use: [&apos;style-loader&apos;, &apos;css-loader&apos;]</div><div class="line">        &#125;]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="资源路径处理"><a href="#资源路径处理" class="headerlink" title="资源路径处理"></a>资源路径处理</h4><p>因为.png等图片文件不是一个 JavaScript 文件，你需要配置 Webpack 使用<a href="https://github.com/webpack/file-loader" target="_blank" rel="external">file-loader</a>或者<a href="https://github.com/webpack/url-loader" target="_blank" rel="external">url-loader</a>去处理它们。使用它们的好处：</p>
<ul>
<li>file-loader 可以指定要复制和放置资源文件的位置，以及如何使用版本哈希命名以获得更好的缓存。此外，这意味着 你可以就近管理你的图片文件，可以使用相对路径而不用担心布署时URL问题。使用正确的配置，Webpack 将会在打包输出中自动重写文件路径为正确的URL。</li>
<li>url-loader 允许你有条件将文件转换为内联的 base-64 URL（当文件小于给定的阈值），这会减少小文件的 HTTP 请求。如果文件大于该阈值，会自动的交给 file-loader 处理。</li>
</ul>
<p>安装 file-loader 和 url-loader：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev file-loader url-loader</div></pre></td></tr></table></figure></p>
<p>配置说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,</div><div class="line">    loader: &apos;url-loader&apos;,</div><div class="line">    options: &#123;</div><div class="line">        limit: 10000,</div><div class="line">        name: &apos;img/[name]_[hash:7].[ext]&apos;</div><div class="line">    &#125;</div><div class="line">&#125;,</div><div class="line">&#123;</div><div class="line">    test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,</div><div class="line">    loader: &apos;url-loader&apos;,</div><div class="line">    options: &#123;</div><div class="line">        limit: 10000,</div><div class="line">        name: &apos;fonts/[name].[hash:7].[ext]&apos;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="插件-Plugins"><a href="#插件-Plugins" class="headerlink" title="插件(Plugins)"></a>插件(Plugins)</h3><blockquote>
<p>由于 loader 仅在每个文件的基础上执行转换，而插件(plugins)最常用于（但不限于）在打包模块的“compilation”和“chunk”生命周期执行操作和自定义功能<a href="https://doc.webpack-china.org/concepts/plugins" target="_blank" rel="external">（查看更多）</a>。webpack 的插件系统<a href="https://doc.webpack-china.org/api/plugins" target="_blank" rel="external">极其强大和可定制化</a>。</p>
</blockquote>
<p>想要使用一个插件，你只需要 require() 它，然后把它添加到 plugins 数组中。多数插件可以通过选项(option)自定义。你也可以在一个配置文件中因为不同目的而多次使用同一个插件，你需要使用 new 创建实例来调用它。</p>
<h4 id="生产环境构建"><a href="#生产环境构建" class="headerlink" title="生产环境构建"></a>生产环境构建</h4><p>对于Vue生产环境构建过程中压缩应用代码和使用<a href="https://cn.vuejs.org/v2/guide/deployment.html#删除警告" target="_blank" rel="external">Vue.js 指南 - 删除警告</a>去除 Vue.js 中的警告，这里我们参考vue-loader文档中的配置说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">if (process.env.NODE_ENV === &apos;production&apos;) &#123;</div><div class="line">    // http://vue-loader.vuejs.org/zh-cn/workflow/production.html</div><div class="line">    module.exports.plugins = (module.exports.plugins || []).concat([</div><div class="line">        new webpack.DefinePlugin(&#123;</div><div class="line">            &apos;process.env&apos;: &#123;</div><div class="line">                NODE_ENV: &apos;&quot;production&quot;&apos;</div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        new webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">            sourceMap: false,</div><div class="line">            compress: &#123;</div><div class="line">                warnings: false</div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        new webpack.LoaderOptionsPlugin(&#123;</div><div class="line">            minimize: true</div><div class="line">        &#125;)</div><div class="line">    ])</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>显然我们不想在开发过程中使用这些配置，所以这里我们需要使用环境变量动态构建，我们也可以使用两个分开的 Webpack 配置文件，一个用于开发环境，一个用于生产环境，类似于vue-cli中使用 webpack-merge 合并配置的方式。</p>
<p>可以使用 Node.js 模块的标准方式：在运行 webpack 时设置环境变量，并且使用 Node.js 的<a href="https://nodejs.org/api/process.html#process_process_env" target="_blank" rel="external">process.env
</a>来引用变量。NODE_ENV变量通常被视为事实标准（查看<a href="https://dzone.com/articles/what-you-should-know-about-node-env" target="_blank" rel="external">这里</a>）。使用<a href="https://www.npmjs.com/package/cross-env" target="_blank" rel="external">cross-env
</a>包来跨平台设置(cross-platform-set)环境变量。</p>
<p>安装cross-env：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev cross-env</div></pre></td></tr></table></figure></p>
<p>设置package.json中的scripts字段：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">    &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack-dev-server --open --hot&quot;,</div><div class="line">    &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack --progress --hide-modules&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里我们使用了cross-env插件，cross-env使得你可以使用单个命令，而无需担心为平台正确设置或使用环境变量。</p>
<h4 id="模块热替换"><a href="#模块热替换" class="headerlink" title="模块热替换"></a>模块热替换</h4><blockquote>
<p>模块热替换功能会在应用程序运行过程中替换、添加或删除<a href="https://doc.webpack-china.org/concepts/modules/" target="_blank" rel="external">模块</a>，而无需重新加载页面。这使得你可以在独立模块变更后，无需刷新整个页面，就可以更新这些模块，极大地加速了开发时间。</p>
</blockquote>
<p>这里我们使用webpack-dev-server插件，webpack-dev-server 为你提供了一个服务器和实时重载（live reloading）功能。webpack-dev-server是一个小型的node.js Express服务器,它使用webpack-dev-middleware中间件来为通过webpack打包生成的资源文件提供Web服务。它还有一个通过Socket.IO连接着webpack-dev-server服务器的小型运行时程序。webpack-dev-server发送关于编译状态的消息到客户端，客户端根据消息作出响应。</p>
<p>安装 webpack-dev-server：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev webpack-dev-server</div></pre></td></tr></table></figure></p>
<p>安装完成之后，你应该可以使用 webpack-dev-server 了，方式如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack-dev-server --open</div></pre></td></tr></table></figure></p>
<p>上述命令应该自动在浏览器中打开 <a href="http://localhost:8080。" target="_blank" rel="external">http://localhost:8080。</a></p>
<p><strong>webpack.config.js</strong>配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">    ...</div><div class="line">    devServer: &#123;</div><div class="line">        historyApiFallback: true, // 任意的 404 响应都替代为 index.html</div><div class="line">        hot: true, // 启用 webpack 的模块热替换特性</div><div class="line">        inline: true // 启用内联模式</div><div class="line">    &#125;,</div><div class="line">    plugins: [</div><div class="line">        new webpack.HotModuleReplacementPlugin()</div><div class="line">    ]</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>更多的配置说明可以看文档：<a href="https://doc.webpack-china.org/configuration/dev-server/" target="_blank" rel="external">DevServer</a></p>
<h4 id="动态生成-html-文件"><a href="#动态生成-html-文件" class="headerlink" title="动态生成 html 文件"></a>动态生成 html 文件</h4><p>该插件将为你生成一个HTML5文件，其中包括使用script标签的body中的所有webpack包，也就是我们不需要手动通过script去引入打包生成的js，特别是如果我们生成的文件名是动态变化的，使用这个插件就可以轻松的解决，只需添加插件到您的webpack配置如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">    ...</div><div class="line">    plugins: [</div><div class="line">        new HtmlWebpackPlugin(&#123;</div><div class="line">            filename: &apos;index.html&apos;,</div><div class="line">            template: &apos;index.html&apos;,</div><div class="line">            inject: true</div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="提取-CSS-文件"><a href="#提取-CSS-文件" class="headerlink" title="提取 CSS 文件"></a>提取 CSS 文件</h4><p><code>extract-text-webpack-plugin</code>是一个 可以将<code>*.vue</code> 文件内的 <code>&lt;style&gt;</code> 提取，以及JavaScript 中导入的 CSS 提取为单个 CSS 文件。配置文档具体见这里：<a href="https://github.com/webpack-contrib/extract-text-webpack-plugin" target="_blank" rel="external">extract-text-webpack-plugin</a>。</p>
<p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev extract-text-webpack-plugin</div></pre></td></tr></table></figure></p>
<p>配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">const ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.css$/,</div><div class="line">        use: ExtractTextPlugin.extract(&#123;</div><div class="line">          fallback: &quot;style-loader&quot;,</div><div class="line">          use: &quot;css-loader&quot;</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    new ExtractTextPlugin(&quot;styles.css&quot;),</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>同时支持我们可以配置生成多个css文件，这样我们可以将业务逻辑代码和引用的样式组件库分离。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</div><div class="line"></div><div class="line">// Create multiple instances</div><div class="line">const extractCSS = new ExtractTextPlugin(&apos;stylesheets/[name]-one.css&apos;);</div><div class="line">const extractLESS = new ExtractTextPlugin(&apos;stylesheets/[name]-two.css&apos;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.css$/,</div><div class="line">        use: extractCSS.extract([ &apos;css-loader&apos;, &apos;postcss-loader&apos; ])</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        test: /\.less$/i,</div><div class="line">        use: extractLESS.extract([ &apos;css-loader&apos;, &apos;less-loader&apos; ])</div><div class="line">      &#125;,</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    extractCSS,</div><div class="line">    extractLESS</div><div class="line">  ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h4 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h4><p>在编译前，删除之前编译结果目录或文件:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev clean-webpack-plugin</div></pre></td></tr></table></figure></p>
<p>配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plugins: [</div><div class="line">    new CleanWebpackPlugin([&apos;dist&apos;])</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>这样当我们在构建的时候可以自动删除之前编译的代码。</p>
<h3 id="解析-Resolve"><a href="#解析-Resolve" class="headerlink" title="解析(Resolve)"></a>解析(Resolve)</h3><p>这些选项能设置模块如何被解析。webpack 提供合理的默认值，但是还是可能会修改一些解析的细节。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">  alias: &#123;</div><div class="line">    &apos;vue$&apos;: &apos;vue/dist/vue.esm.js&apos;,</div><div class="line">    &apos;@&apos;: path.join(__dirname, &apos;src&apos;)</div><div class="line">  &#125;,</div><div class="line">  extensions: [&apos;.js&apos;, &apos;.json&apos;, &apos;.vue&apos;, &apos;.css&apos;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们使用最多的就是别名（alias）和自动解析确定的扩展（extensions），例如上面的@可以代替项目中src的路径，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import tab from &apos;@/components/tab.vue&apos;</div></pre></td></tr></table></figure></p>
<p>我们引用src/components目录下的tab.vue组件，不需要通过<code>../</code>之类的计算文件相对路径。这里的extensions可以让我们在引入模块时不带扩展：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import tab from &apos;@/components/tab&apos;</div></pre></td></tr></table></figure></p>
<p>至此我们已经学习了我们项目devDependencies依赖中常用的模块：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">webpack </div><div class="line">css-loader / style-loader</div><div class="line">file-loader / url-loader </div><div class="line">cross-env </div><div class="line">webpack-dev-server </div><div class="line">html-webpack-plugin </div><div class="line">extract-text-webpack-plugin</div><div class="line">clean-webpack-plugin</div></pre></td></tr></table></figure></p>
<p>这里我们只说明了css、图片、html模板资源webpack相关的加载器和插件，对于js相关的内容丝毫没有提到，显然这是不合乎情理的。之所以要把js单独拿出来是因为js相关的内容很重要，独立出来详细去归纳一下更合适。</p>
<hr>
<h2 id="webpack-中如何使用-es6-es8"><a href="#webpack-中如何使用-es6-es8" class="headerlink" title="webpack 中如何使用 es6 ~ es8?"></a>webpack 中如何使用 es6 ~ es8?</h2><p>作为一个前端，相信 es6 几乎是无人不知，很多人也一定知道可以使用Babel做语法转换，但是对于Babel有哪一些版本，每个版本支持的es6语法有哪一些应该不是所有人都清楚的，这就是这部份内容要写的意义。毕竟如果我们的插件只用到了es6中的没一些新特性，为此将整个包引入就有点不太合适，另外为了更好的用上新特性，我们至少要明白有哪一些新特性吧。</p>
<h3 id="ECMAScript-标准建立的过程"><a href="#ECMAScript-标准建立的过程" class="headerlink" title="ECMAScript 标准建立的过程"></a>ECMAScript 标准建立的过程</h3><p>ECMAScript 和 JavaScript 的关系在此不再赘述，建议阅读一下阮一峰老师的<a href="http://es6.ruanyifeng.com/#docs/intro" target="_blank" rel="external">《ECMAScript 6简介》</a>，我们需要了解的是<strong>从ECMAScript 2016开始，ECMAScript将进入每年发布一次新标准的阶段</strong>。制定ECMAScript 标准的组织是<strong>ECMAScript TC39</strong>，<a href="http://www.ecma-international.org/memento/TC39.htm" target="_blank" rel="external">TC39</a>（ECMA技术委员为39）是推动JavaScript发展的委员会。 它的成员是都是企业（主要是浏览器厂商）。TC39会<a href="http://www.ecma-international.org/memento/TC39-M.htm" target="_blank" rel="external">定期的开会</a>， 会议的主要成员时是成员公司的代表，以及受邀请的专家。</p>
<p>一种新的语法从提案到变成正式标准，需要经历五个阶段。每个阶段的变动都需要由 TC39 委员会批准。</p>
<ul>
<li>Stage 0 - Strawman（展示阶段）</li>
<li>Stage 1 - Proposal（征求意见阶段）</li>
<li>Stage 2 - Draft（草案阶段）</li>
<li>Stage 3 - Candidate（候选人阶段）</li>
<li>Stage 4 - Finished（定案阶段）</li>
</ul>
<p>建议看一下alinode 团队的<a href="http://alinode.aliyun.com/blog/22" target="_blank" rel="external">图说ECMAScript新标准（一）</a>就可以大致了解整个过程。</p>
<h3 id="安装-Babel"><a href="#安装-Babel" class="headerlink" title="安装 Babel"></a>安装 Babel</h3><p>Babel 现在的官网提供了一个可以根据你的工具提示下载合适的包，具体见这里：<a href="http://babeljs.io/docs/setup/" target="_blank" rel="external">Using Babel</a>。</p>
<p>如果你想要在命令行使用Babel，你可以安装babel-cli，但是全局的安装babel-cli不是一个好的选择，因为这样限定了你Babel的版本；如果你需要在一个Node项目中使用Babel，你可以使用babel-core。</p>
<p>我们这里自然选择webpack构建我们的工程，下载方案如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev babel-loader babel-core</div></pre></td></tr></table></figure></p>
<p>然后我们需要在项目根目录下建立<code>.babelrc</code>文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [],</div><div class="line">  &quot;plugins&quot;: []</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>注：在window下无法通过 右键=&gt;新建 命令来创建以点开头的文件和文件夹，我们可以通过下面的命令生成<code>.babelrc</code>文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">type NUL &gt; .babelrc</div></pre></td></tr></table></figure></p>
<p>Linux和Mac下可以通过touch命令生成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch .babelrc</div></pre></td></tr></table></figure></p>
<h3 id="Babel-预设-presets"><a href="#Babel-预设-presets" class="headerlink" title="Babel 预设(presets)"></a>Babel 预设(presets)</h3><p>Babel是一个编译器。 在高层次上，它有3个阶段，它运行代码：解析，转换和生成（像许多其他编译器）。默认情况下，Babel 6并没有携带任何转换器，因此如果对你的代码使用Babel的话，它将会原文输出你的代码，不会有任何的改变。因此你需要根据你需要完成的任务来单独安装相应的插件。</p>
<p>你可以通过安装<strong>插件（plugins）或预设（presets，也就是一组插件）</strong>来指示 Babel 去做什么事情。Babel 提供了多个版本的官方预设：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/preset-env/" target="_blank" rel="external">env</a></li>
<li><a href="http://babeljs.io/docs/plugins/preset-es2015/" target="_blank" rel="external">es2015</a></li>
<li><a href="http://babeljs.io/docs/plugins/preset-es2016/" target="_blank" rel="external">es2016</a></li>
<li><a href="http://babeljs.io/docs/plugins/preset-es2017/" target="_blank" rel="external">es2017</a></li>
<li><a href="http://babeljs.io/docs/plugins/preset-latest/" target="_blank" rel="external">latest (deprecated in favor of env)</a></li>
</ul>
<h4 id="babel-preset-env"><a href="#babel-preset-env" class="headerlink" title="babel-preset-env"></a>babel-preset-env</h4><p><strong>babel-preset-env</strong>可以根据你配置的选项，自动添加一些其他的转换器，来满足你当前的装换需求。.babelrc文件新增了options选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [&quot;env&quot;, options]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>具体的配置内容：</p>
<ul>
<li>targets.node 支持到哪个版本的 node</li>
<li>targets.browsers 支持到哪个版本的浏览器</li>
<li>loose 启动宽松模式，配合 webpack 的 loader 使用</li>
<li>modules 使用何种模块加载机制</li>
<li>debug 开启调试模式</li>
<li>include 包含哪些文件</li>
<li>exclude 排除哪些文件</li>
<li>useBuiltIns 是否对 babel-polyfill 进行分解，只引入所需的部分</li>
</ul>
<h4 id="babel-preset-es2015"><a href="#babel-preset-es2015" class="headerlink" title="babel-preset-es2015"></a>babel-preset-es2015</h4><p>es2015(ES6)相关方法转译使用的插件，具体见<a href="http://babeljs.io/docs/plugins/preset-es2015/" target="_blank" rel="external">文档</a>。</p>
<ul>
<li>check-es2015-constants // 检验const常量是否被重新赋值</li>
<li>transform-es2015-arrow-functions // 编译箭头函数</li>
<li>transform-es2015-block-scoped-functions // 函数声明在作用域内</li>
<li>transform-es2015-block-scoping // 编译const和let</li>
<li>transform-es2015-classes // 编译class</li>
<li>transform-es2015-computed-properties // 编译计算对象属性</li>
<li>transform-es2015-destructuring // 编译解构赋值</li>
<li>transform-es2015-duplicate-keys // 编译对象中重复的key，其实是转换成计算对象属性</li>
<li>transform-es2015-for-of // 编译for…of</li>
<li>transform-es2015-function-name // 将function.name语义应用于所有的function</li>
<li>transform-es2015-literals // 编译整数(8进制/16进制)和unicode</li>
<li>transform-es2015-modules-commonjs // 将modules编译成commonjs</li>
<li>transform-es2015-object-super // 编译super</li>
<li>transform-es2015-parameters // 编译参数，包括默认参数，不定参数和解构参数</li>
<li>transform-es2015-shorthand-properties // 编译属性缩写</li>
<li>transform-es2015-spread // 编译展开运算符</li>
<li>transform-es2015-sticky-regex // 正则添加sticky属性</li>
<li>transform-es2015-template-literals // 编译模版字符串</li>
<li>transform-es2015-typeof-symbol // 编译Symbol类型</li>
<li>transform-es2015-unicode-regex // 正则添加unicode模式</li>
<li>transform-regenerator // 编译generator函数</li>
</ul>
<h4 id="babel-preset-es2016"><a href="#babel-preset-es2016" class="headerlink" title="babel-preset-es2016"></a>babel-preset-es2016</h4><p>es2016(ES7)相关方法转译使用的插件，具体见<a href="http://babeljs.io/docs/plugins/preset-es2016/" target="_blank" rel="external">文档</a>。</p>
<ul>
<li>transform-exponentiation-operator // 编译幂运算符</li>
</ul>
<h4 id="babel-preset-es2017"><a href="#babel-preset-es2017" class="headerlink" title="babel-preset-es2017"></a>babel-preset-es2017</h4><p>es2017(ES8)相关方法转译使用的插件，具体见<a href="http://babeljs.io/docs/plugins/preset-es2017/" target="_blank" rel="external">文档</a>。</p>
<ul>
<li>syntax-trailing-function-commas // function最后一个参数允许使用逗号</li>
<li>transform-async-to-generator // 把async函数转化成generator函数</li>
</ul>
<h4 id="babel-preset-latest"><a href="#babel-preset-latest" class="headerlink" title="babel-preset-latest"></a>babel-preset-latest</h4><p>latest是一个特殊的presets，包括了es2015，es2016，es2017的插件，不过已经废弃，使用babel-preset-env代替，具体见<a href="http://babeljs.io/docs/plugins/preset-latest/" target="_blank" rel="external">文档</a>。</p>
<h4 id="stage-x-stage-0-1-2-3-4"><a href="#stage-x-stage-0-1-2-3-4" class="headerlink" title="stage-x(stage-0/1/2/3/4)"></a>stage-x(stage-0/1/2/3/4)</h4><p>stage-x预设中的任何转换都是尚未被批准为发布Javascript的语言（如ES6 / ES2015）的更改。</p>
<p>stage-x和上面的es2015等有些类似，但是它是按照JavaScript的提案阶段区分的，一共有5个阶段。而数字越小，阶段越靠后，存在依赖关系。也就是说stage-0是包括stage-1的，以此类推。</p>
<p><strong>babel-preset-stage-4：</strong></p>
<p>stage-4的插件：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/syntax-trailing-function-commas/" target="_blank" rel="external">syntax-trailing-function-commas</a>  // function最后一个参数允许使用逗号（ES8已经存在）</li>
<li><a href="http://babeljs.io/docs/plugins/transform-async-to-generator/" target="_blank" rel="external">transform-async-to-generator</a> // 把async函数转化成generator函数（ES8已经存在）</li>
<li><a href="http://babeljs.io/docs/plugins/transform-exponentiation-operator/" target="_blank" rel="external">transform-exponentiation-operator</a> // 编译幂运算符（ES7已经存在）</li>
</ul>
<p><strong>babel-preset-stage-3：</strong></p>
<p>除了stage-4的内容，还包括以下插件：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/transform-object-rest-spread/" target="_blank" rel="external">transform-object-rest-spread</a> // 编译对象的解构赋值和不定参数</li>
<li><a href="http://babeljs.io/docs/plugins/transform-async-generator-functions/" target="_blank" rel="external">transform-async-generator-functions</a> // 将async generator function和for await编译为es2015的generator。</li>
</ul>
<p><strong>babel-preset-stage-2：</strong></p>
<p>除了stage-3的内容，还包括以下插件：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/syntax-dynamic-import/" target="_blank" rel="external">syntax-dynamic-import</a> // 动态加载模块</li>
<li><a href="http://babeljs.io/docs/plugins/transform-class-properties/" target="_blank" rel="external">transform-class-properties</a>  // 编译静态属性(es2015)和属性初始化语法声明的属性(es2016)。</li>
<li><del><a href="http://babeljs.io/docs/plugins/transform-decorators/" target="_blank" rel="external">transform-decorators</a></del>已禁用的等待提案更新（可以在此期间使用旧版转换）</li>
</ul>
<p><strong>babel-preset-stage-1：</strong></p>
<p>除了stage-2的内容，还包括以下插件：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/transform-class-constructor-call/" target="_blank" rel="external">transform-class-constructor-call</a>(弃用)  // 编译class中的constructor，在Babel7中会被移除</li>
<li><a href="http://babeljs.io/docs/plugins/transform-export-extensions/" target="_blank" rel="external">transform-export-extensions</a> // 编译额外的export语法，如export * as ns from “mod”;细节可以看<a href="https://github.com/leebyron/ecmascript-more-export-from" target="_blank" rel="external">这个</a>。</li>
</ul>
<p><strong>babel-preset-stage-0：</strong></p>
<p>除了stage-1的内容，还包括以下插件：</p>
<ul>
<li><a href="http://babeljs.io/docs/plugins/transform-do-expressions/" target="_blank" rel="external">transform-do-expressions</a>  // 编译do表达式</li>
<li><a href="http://babeljs.io/docs/plugins/transform-function-bind/" target="_blank" rel="external">transform-function-bind</a>  // 编译bind运算符，即<code>::</code></li>
</ul>
<p>为了方便，我们暂时引用 <strong>babel-preset-env</strong> 和<strong>babel-preset-stage-2</strong>这两个预设。为了启用预设，必须在.babelrc文件中定义预设的相关配置，这里参考vue-cli 模板中的<a href="https://github.com/vuejs-templates/webpack/blob/master/template/.babelrc" target="_blank" rel="external">配置</a>。<br>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npminstall --save-dev babel-preset-env babel-preset-stage-2</div></pre></td></tr></table></figure></p>
<p>.babelrc配置说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;presets&quot;: [</div><div class="line">    [&quot;env&quot;, &#123; </div><div class="line">      &quot;modules&quot;: false </div><div class="line">    &#125;],</div><div class="line">    &quot;stage-2&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Babel-插件-plugins"><a href="#Babel-插件-plugins" class="headerlink" title="Babel 插件(plugins)"></a>Babel 插件(plugins)</h3><p>我们看一下预设的构成就知道，其实就是plugins的组合。如果你不采用presets，完全可以单独引入某个功能，比如以下的设置就会引入编译箭头函数的功能，在.babelrc文件中进行配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [&quot;transform-es2015-arrow-functions&quot;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="babel-polyfill-与-babel-runtime"><a href="#babel-polyfill-与-babel-runtime" class="headerlink" title="babel-polyfill 与 babel-runtime"></a>babel-polyfill 与 babel-runtime</h4><p>Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如 Object.assign）都不会转码。</p>
<p>举例来说，ES6在 Array 对象上新增了 Array.from 方法。Babel就不会转码这个方法。如果想让这个方法运行，必须使用 babel-polyfill ，为当前环境提供一个垫片。babel-polyfill 是对浏览器缺失API的支持。</p>
<p>babel-runtime 是为了减少重复代码而生的。 babel生成的代码，可能会用到一些_extend()， classCallCheck() 之类的工具函数，默认情况下，这些工具函数的代码会包含在编译后的文件中。如果存在多个文件，那每个文件都有可能含有一份重复的代码。babel-runtime插件能够将这些工具函数的代码转换成require语句，指向为对babel-runtime的引用，如<code>require(&#39;babel-runtime/helpers/classCallCheck&#39;)</code>. 这样， classCallCheck的代码就不需要在每个文件中都存在了。</p>
<p>启用插件 babel-plugin-transform-runtime 后，Babel 就会使用 babel-runtime 下的工具函数。除此之外，babel 还为源代码的非实例方法（Object.assign，实例方法是类似这样的 “foobar”.includes(“foo”)）和 babel-runtime/helps 下的工具函数自动引用了 polyfill。这样可以避免污染全局命名空间，非常适合于 JavaScript 库和工具包的实现。</p>
<p>总结：</p>
<ul>
<li>具体项目还是需要使用 babel-polyfill，只使用 babel-runtime 的话，实例方法不能正常工作（例如 “foobar”.includes(“foo”)）；</li>
<li>JavaScript 库和工具可以使用 babel-runtime，在实际项目中使用这些库和工具，需要该项目本身提供 polyfill。</li>
<li>transform-runtime只会对es6的语法进行转换，而不会对新api进行转换。如果需要转换新api，就要引入babel-polyfill。</li>
</ul>
<p><strong>安装插件</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev babel-plugin-transform-runtime</div></pre></td></tr></table></figure></p>
<p>.babelrc 配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;plugins&quot;: [&quot;transform-runtime&quot;, options]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>options主要有以下设置项：</p>
<ul>
<li>helpers: boolean，默认true，使用babel的helper函数；</li>
<li>polyfill: boolean，默认true，使用babel的polyfill，但是不能完全取代babel-polyfill；</li>
<li>regenerator: boolean，默认true，使用babel的regenerator；</li>
<li>moduleName: string，默认babel-runtime，使用对应module处理。</li>
</ul>
<p>注：默认moduleName为babel-runtime，这里我们可以不必显式的下载babel-runtime，因为babel-plugin-transform-runtime依赖于babel-runtime。</p>
<h4 id="babel-register"><a href="#babel-register" class="headerlink" title="babel-register"></a>babel-register</h4><p>babel-register 模块改写 require 命令，为它加上一个钩子。此后，每当使用 require 加载 .js 、 .jsx 、 .es 和 .es6 后缀名的文件，就会先用Babel进行转码。引入babel-register，这样后面的文件就可以用 import 代替require，import的优点在于可以引入所需方法或者变量，而不需要加载整个模块，提高了性能。</p>
<p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev babel-register</div></pre></td></tr></table></figure></p>
<p>这部分我们又介绍了下面几个模块的安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">babel-loader</div><div class="line">babel-core</div><div class="line">babel-preset-env </div><div class="line">babel-preset-stage-2 </div><div class="line">babel-plugin-transform-runtime</div><div class="line">babel-register</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="webpack-中如何使用-vue"><a href="#webpack-中如何使用-vue" class="headerlink" title="webpack 中如何使用 vue?"></a>webpack 中如何使用 vue?</h2><p>既然本文的目标是vue的自定义模板工程，那么自然这里需要单独介绍一下webpack中vue相关的插件。</p>
<h3 id="Vue2-dist-目录下各个文件的区别"><a href="#Vue2-dist-目录下各个文件的区别" class="headerlink" title="Vue2 dist 目录下各个文件的区别"></a>Vue2 dist 目录下各个文件的区别</h3><p>npm 安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save vue</div></pre></td></tr></table></figure></p>
<p>vue2 经过 2.2 版本升级后, 文件变成 8 个:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">UMD</th>
<th style="text-align:center">CommonJS</th>
<th>ES Module</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">独立构建</td>
<td style="text-align:center">vue.js</td>
<td style="text-align:center">vue.common.js</td>
<td>vue.esm.js</td>
</tr>
<tr>
<td style="text-align:center">运行构建</td>
<td style="text-align:center">vue.runtime.js</td>
<td style="text-align:center">vue.runtime.common.js</td>
<td>vue.runtime.esm.js</td>
</tr>
</tbody>
</table>
<p>vue.min.js 和 vue.runtime.min.js 都是对应的压缩版。</p>
<ul>
<li><p>AMD:异步模块规范<br>vue 没有单独提供 AMD 模块的版本，但是UMD版本中进行了包装，可以直接用作 AMD 模块，使用方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">define([&quot;Vue&quot;],function(Vue) &#123;</div><div class="line">    function myFn() &#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    return myFn;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>CommonJS:<br>node中常用的模块规范，通过require引入模块，module.exports导出模块。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">function Vue$3() &#123;</div><div class="line">   ...</div><div class="line">&#125;</div><div class="line">...</div><div class="line">module.exports = Vue$3;</div></pre></td></tr></table></figure>
</li>
<li><p>UMD: 通用模块规范<br>兼容了AMD和CommonJS，同时还支持老式的“全局”变量规范：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(function (global, factory) &#123;</div><div class="line">	typeof exports === &apos;object&apos; &amp;&amp; typeof module !== &apos;undefined&apos; ? module.exports = factory() :</div><div class="line">	typeof define === &apos;function&apos; &amp;&amp; define.amd ? define(factory) :</div><div class="line">	(global.Vue = factory());</div><div class="line">&#125;(this, (function () &#123; &apos;use strict&apos;;</div><div class="line">    ...</div><div class="line">    function Vue$3() &#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">    return Vue$3;</div><div class="line">&#125;)));</div></pre></td></tr></table></figure>
</li>
<li><p>ES Module<br>ES6在语言标准的层面上，实现的模块功能。模块功能主要由两个命令构成：export和import。export命令用于规定模块的对外接口，import命令用于输入其他模块提供的功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">function Vue$3() &#123;</div><div class="line">   ...</div><div class="line">&#125;</div><div class="line">export default Vue$3;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>总结：</strong></p>
<ul>
<li>vue.js 和 vue.runtime.js 可以用于直接 CDN 引用；</li>
<li>vue.common.js和vue.runtime.common.js可以使用Webpack1 / Browserify 打包构建；</li>
<li>vue.esm.js和vue.runtime.esm.js可以使用Webpack2 / rollup 打包构建。</li>
</ul>
<p>vue有两种构建方式，独立构建和运行时构建。它们的区别独立构建前者包含模板编译器而运行构建不包含。模板编译器的职责是将模板字符串编译为纯 JavaScript 的渲染函数。如果你想要在组件中使用 template 选项，你就需要编译器。</p>
<ul>
<li>独立构建包含模板编译器并支持 template 选项。 它也依赖于浏览器的接口的存在，所以你不能使用它来为服务器端渲染。</li>
<li>运行时构建不包含模板编译器，因此不支持 template 选项，只能用 render 选项，但即使使用运行时构建，在单文件组件中也依然可以写模板，因为单文件组件的模板会在构建时预编译为 render 函数。运行时构建比独立构建要轻量30%，只有 17.14 Kb min+gzip大小。</li>
</ul>
<p>独立构建方式可以这样使用template选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">import Vue from &apos;vue&apos;</div><div class="line">new Vue(&#123;</div><div class="line">  template: `</div><div class="line">    &lt;div id=&quot;app&quot;&gt;</div><div class="line">      &lt;h1&gt;Basic&lt;/h1&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  `</div><div class="line">&#125;).$mount(&apos;#app&apos;)</div></pre></td></tr></table></figure></p>
<p>这里我们使用ES Module规范，默认 NPM 包导出的是运行时构建。为了使用独立构建，在 webpack 配置中添加下面的别名：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">  alias: &#123;</div><div class="line">    &apos;vue$&apos;: &apos;vue/dist/vue.esm.js&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="vue-loader"><a href="#vue-loader" class="headerlink" title="vue-loader"></a>vue-loader</h3><p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev vue-loader vue-template-compiler</div></pre></td></tr></table></figure></p>
<p>vue-loader 依赖于 vue-template-compiler。</p>
<p>vue-loader 是一个 Webpack 的 loader，可以将用下面这个格式编写的 Vue 组件转换为 JavaScript 模块。这里有一些 vue-loader 提供的很酷的特性：</p>
<ul>
<li>ES2015 默认支持;</li>
<li>允许对 Vue 组件的组成部分使用其它 Webpack loaders，比如对 <code>&lt;style&gt;</code> 使用 SASS 和对 <code>&lt;template&gt;</code> 使用 Jade；</li>
<li>.vue 文件中允许自定义节点，然后使用自定义的 loader 处理他们；</li>
<li>把<code>&lt;style&gt;</code>和 <code>&lt;template&gt;</code> 中的静态资源当作模块来对待，并使用 Webpack loaders 进行处理；</li>
<li>对每个组件模拟出 CSS 作用域；</li>
<li>支持开发期组件的热重载。</li>
</ul>
<p>简而言之，编写 Vue.js 应用程序时，组合使用 Webpack 和 vue-loader 能带来一个现代，灵活并且非常强大的前端工作流程。</p>
<p>在 Webpack 中，所有的预处理器需要匹配对应的 loader。 vue-loader 允许你使用其它 Webpack loaders 处理 Vue 组件的某一部分。它会根据 lang 属性自动推断出要使用的 loaders。</p>
<p>上述我们提到extract-text-webpack-plugin插件提取css，这里说明一下.vue中style标签之间的样式提取的办法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">var ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.vue$/,</div><div class="line">        loader: &apos;vue-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          loaders: &#123;</div><div class="line">            css: ExtractTextPlugin.extract(&#123;</div><div class="line">              use: &apos;css-loader&apos;,</div><div class="line">              fallback: &apos;vue-style-loader&apos; // &lt;- 这是vue-loader的依赖，所以如果使用npm3，则不需要显式安装</div><div class="line">            &#125;)</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    new ExtractTextPlugin(&quot;app.css&quot;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="pug-模板"><a href="#pug-模板" class="headerlink" title="pug 模板"></a>pug 模板</h3><p>用过模板的都知道，熟悉了模板写起来快多了，大名鼎鼎的jade恐怕无人不知吧。pug是什么鬼？第一次听到的时候我也好奇了，然后查了一下才知道，Pug原名不叫Pug，原来是大名鼎鼎的jade，后来由于商标的原因，改为Pug，哈巴狗。以下是官方解释：</p>
<blockquote>
<p>it has been revealed to us that “Jade” is a registered trademark, and as a result a rename is needed. After some discussion among the maintainers, “Pug” has been chosen as the new name for this project.</p>
</blockquote>
<p>简单看了看还是原来jade熟悉的语法规则，果断在这个模板工程里面用上。</p>
<p>vue-loader里面对于模版的处理方式略有不同，因为大多数 Webpack 模版处理器（比如 pug-loader）会返回模版处理函数，而不是编译的 HTML 字符串，我们使用原始的 pug 替代 pug-loader:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install pug --save-dev</div></pre></td></tr></table></figure></p>
<p>使用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;template lang=&quot;pug&quot;&gt;</div><div class="line">div</div><div class="line">  h1 Hello world!</div><div class="line">&lt;/template&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>重要: 如果你使用 vue-loader@&lt;8.2.0， 你还需要安装 <code>template-html-loader</code>。</p>
</blockquote>
<h3 id="PostCSS"><a href="#PostCSS" class="headerlink" title="PostCSS"></a>PostCSS</h3><p>安装vue-loader的时候默认安装了postcss，由vue-loader处理的 CSS 输出，都是通过PostCSS进行作用域重写，你还可以为 PostCSS 添加自定义插件，例如<a href="https://github.com/postcss/autoprefixer" target="_blank" rel="external">autoprefixer</a>或者<a href="http://cssnext.io/" target="_blank" rel="external">CSSNext</a>。</p>
<p>在 webpack 工程中使用 postcss，我们需要下载 postcss-loader：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev postcss-loader</div></pre></td></tr></table></figure></p>
<h4 id="cssnext"><a href="#cssnext" class="headerlink" title="cssnext"></a>cssnext</h4><blockquote>
<p>cssnext 是一个 CSS transpiler，允许你使用最新的 CSS 语法。cssnext 把 <a href="http://www.xanthir.com/b4Ko0" target="_blank" rel="external">新 CSS 规范</a>转换成兼容性更强的 CSS，所以不需要等待各种浏览器支持。</p>
</blockquote>
<p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev postcss-cssnext</div></pre></td></tr></table></figure></p>
<p>postcss.config.js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">    plugins: [</div><div class="line">        require(&apos;postcss-cssnext&apos;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>webpack.config.js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">    module: &#123;</div><div class="line">        loaders: [</div><div class="line">            &#123;</div><div class="line">                test:   /\.css$/,</div><div class="line">                use: [&apos;style-loader&apos;, &apos;css-loader&apos;, &apos;postcss-loader&apos;]</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>cssnext 依赖了autoprefixer，所以我们无需显式下载autoprefixer。更多关于postcss的插件可以看这里：<a href="https://github.com/postcss/postcss#plugins" target="_blank" rel="external">postcss plugins</a>。</p>
<p>这一部分我们学习了这些依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vue</div><div class="line">vue-loader </div><div class="line">vue-template-compiler</div><div class="line">pug</div><div class="line">postcss-loader</div><div class="line">postcss-cssnext</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="webpack2-开启-eslint-校验"><a href="#webpack2-开启-eslint-校验" class="headerlink" title="webpack2 开启 eslint 校验"></a>webpack2 开启 eslint 校验</h2><p>规范自己的代码从ESlint开始。ESlint和webpack集成，在babel编译代码开始前，进行代码规范检测。这里我们使用<a href="https://github.com/feross/standard/blob/master/docs/RULES-zhcn.md" target="_blank" rel="external">javascript-style-standard</a>风格的校验。</p>
<p>主要依赖的几个包：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">eslint —— 基础包</div><div class="line">eslint-loader —— webpack loader</div><div class="line">babel-eslint —— 校验babel</div><div class="line">eslint-plugin-html —— 提取并检验你的 .vue 文件中的 JavaScript</div><div class="line">eslint-friendly-formatter —— 生成美化的报告格式</div><div class="line"></div><div class="line"># javascript-style-standard 依赖的包</div><div class="line">eslint-config-standard</div><div class="line">eslint-plugin-import</div><div class="line">eslint-plugin-node</div><div class="line">eslint-plugin-promise</div><div class="line">eslint-plugin-standard</div></pre></td></tr></table></figure></p>
<p>安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev eslint eslint-loader babel-eslint eslint-plugin-html eslint-friendly-formatter eslint-config-standard eslint-plugin-import eslint-plugin-node eslint-plugin-node eslint-plugin-promise eslint-plugin-standard</div></pre></td></tr></table></figure></p>
<p>关于eslint的配置方式，比较多元化，具体可以看<a href="http://eslint.cn/docs/user-guide/configuring" target="_blank" rel="external">配置文档</a>：</p>
<ul>
<li>js注释</li>
<li>.eslintrc.*文件</li>
<li>package.json里面配置eslintConfig字段</li>
</ul>
<p>安装eslint-loader之后，我们可以在webpack配置中使用eslint加载器。webpack.config.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">module: &#123;</div><div class="line">  loaders: [</div><div class="line">    &#123;</div><div class="line">         test: /\.vue|js$/,</div><div class="line">         enforce: &apos;pre&apos;,</div><div class="line">         include: path.resolve(__dirname, &apos;src&apos;),</div><div class="line">         exclude: /node_modules/,</div><div class="line">         use: [&#123;</div><div class="line">             loader: &apos;eslint-loader&apos;,</div><div class="line">             options: &#123;</div><div class="line">                 formatter: require(&apos;eslint-friendly-formatter&apos;)</div><div class="line">             &#125;</div><div class="line">         &#125;]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;,</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>此外，我们既可以在webpack配置文件中指定检测规则，也可以遵循最佳实践在一个专门的文件中指定检测规则，我们就采用后面的方式。<br>在根目录下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">touch .eslintrc.js</div></pre></td></tr></table></figure></p>
<p>.eslintrc.js：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  root: true,</div><div class="line">  parser: &apos;babel-eslint&apos;,</div><div class="line">  parserOptions: &#123;</div><div class="line">    sourceType: &apos;module&apos;</div><div class="line">  &#125;,</div><div class="line">  env: &#123;</div><div class="line">    browser: true</div><div class="line">  &#125;,</div><div class="line">  extends: &apos;standard&apos;,</div><div class="line">  // required to lint *.vue files</div><div class="line">  plugins: [</div><div class="line">    &apos;html&apos;</div><div class="line">  ],</div><div class="line">  // add your custom rules here</div><div class="line">  rules: &#123;</div><div class="line">    // allow paren-less arrow functions</div><div class="line">    &apos;arrow-parens&apos;: 0,</div><div class="line">    // allow async-await</div><div class="line">    &apos;generator-star-spacing&apos;: 0,</div><div class="line">    // allow debugger during development</div><div class="line">    &apos;no-debugger&apos;: process.env.NODE_ENV === &apos;production&apos; ? 2 : 0</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这部份我们主要学习了一下eslint相关插件的含义和配置方法。</p>
<h2 id="创建属于你的模板"><a href="#创建属于你的模板" class="headerlink" title="创建属于你的模板"></a>创建属于你的模板</h2><p>如果你对官方的模板不感兴趣，你可以自己fork下来然后进行修改（或者重新写一个），然后用 vue-cli 来调用。因为 vue-cli 可以直接拉取 git源：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vue init username/repo my-project</div></pre></td></tr></table></figure></p>
<p>这里我们参考vue-cli的模板工程自己写一个模板工程，主要是需要通过meta.*（js,json）进行配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  &quot;helpers&quot;: &#123;</div><div class="line">    &quot;if_or&quot;: function (v1, v2, options) &#123;</div><div class="line">      if (v1 || v2) &#123;</div><div class="line">        return options.fn(this);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      return options.inverse(this);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &quot;prompts&quot;: &#123;</div><div class="line">    &quot;name&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;,</div><div class="line">      &quot;required&quot;: true,</div><div class="line">      &quot;message&quot;: &quot;Project name&quot;</div><div class="line">    &#125;,</div><div class="line">	&quot;version&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;,</div><div class="line">      &quot;required&quot;: false,</div><div class="line">      &quot;message&quot;: &quot;Project version&quot;,</div><div class="line">      &quot;default&quot;: &quot;1.0.0&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;description&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;,</div><div class="line">      &quot;required&quot;: false,</div><div class="line">      &quot;message&quot;: &quot;Project description&quot;,</div><div class="line">      &quot;default&quot;: &quot;A Vue.js project&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;author&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;string&quot;,</div><div class="line">      &quot;message&quot;: &quot;Author&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;router&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;confirm&quot;,</div><div class="line">      &quot;message&quot;: &quot;Install vue-router?&quot;</div><div class="line">    &#125;,</div><div class="line">	&quot;vuex&quot;: &#123;</div><div class="line">      &quot;type&quot;: &quot;confirm&quot;,</div><div class="line">      &quot;message&quot;: &quot;Install vuex?&quot;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &quot;completeMessage&quot;: &quot;To get started:\n\n  &#123;&#123;^inPlace&#125;&#125;cd &#123;&#123;destDirName&#125;&#125;\n  &#123;&#123;/inPlace&#125;&#125;npm install\n  npm run dev\n\nDocumentation can be found at https://github.com/zhaomenghuan/vue-webpack-template&quot;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>这里我们就是采用最简单的方式，对于vue-router、vuex的配置每个人习惯不一样，所以不写在模板工程里面。</p>
<p>然后使用vue-cli使用这个模板创建工程，没有安装vue-cli的执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --global vue-cli</div></pre></td></tr></table></figure></p>
<p>然后创建工程：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 创建一个基于 webpack 模板的新项目</div><div class="line">vue init zhaomenghuan/vue-webpack-template my-project</div><div class="line"># 安装依赖，走你</div><div class="line">cd my-project</div><div class="line">npm install</div><div class="line">npm run dev</div></pre></td></tr></table></figure></p>
<blockquote>
<p>这里按照国际惯例安利一下本文的模板工程：<strong><a href="https://github.com/zhaomenghuan/vue-webpack-template" target="_blank" rel="external">vue-webpack-template</a></strong></p>
</blockquote>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://webpack.js.org/" target="_blank" rel="external">webpack官方文档</a><br><a href="http://babeljs.io" target="_blank" rel="external">babel官方文档</a><br><a href="http://vue-loader.vuejs.org/zh-cn/" target="_blank" rel="external">vue-loader中文文档</a><br><a href="http://exploringjs.com/" target="_blank" rel="external">JavaScript books by Dr. Axel Rauschmayer</a><br><a href="http://wwsun.github.io/posts/new-in-es2016.html" target="_blank" rel="external">ES7新特性及ECMAScript标准的制定流程</a><br><a href="https://zhuanlan.zhihu.com/p/24224107" target="_blank" rel="external">如何写好.babelrc？Babel的presets和plugins配置解析</a><br><a href="https://segmentfault.com/q/1010000005596587" target="_blank" rel="external">babel的polyfill和runtime的区别</a><br><a href="https://segmentfault.com/a/1190000008575829" target="_blank" rel="external">webpack2集成eslint</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-05-17T09:07:39.783Z" itemprop="dateUpdated">2017-05-17 17:07:39</time>
</span><br>


        
        转载需标注本文原始地址：<a href="/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" target="_blank" rel="external">https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/</a>
        
    </div>
    <footer>
        <a href="https://zhaomenghuan.github.io">
            <img src="/img/avatar.png" alt="赵梦欢">
            赵梦欢
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue-cli/">vue-cli</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue-js/">vue.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&title=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&pic=https://zhaomenghuan.github.io/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&title=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&source=小青年,小青年博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&via=https://zhaomenghuan.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/06/27/JavaScript-进阶之深入理解数据双向绑定/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">JavaScript 进阶之深入理解数据双向绑定</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/05/12/Linux CentOS7 搭建node服务详细教程/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Linux CentOS7 搭建node服务详细教程</h4>
      </a>
    </div>
  
</nav>



    













</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢老铁~
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        <li>
            <img src="/img/wechat.png" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="/img/alipay.png" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>赵梦欢 &copy; 2015 - 2017</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&title=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&pic=https://zhaomenghuan.github.io/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&title=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&source=小青年,小青年博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《从0到1搭建webpack2+vue2自定义模板详细教程》 — 小青年博客&url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/&via=https://zhaomenghuan.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://zhaomenghuan.github.io/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADM0lEQVR42u3aS1LkQAwFQO5/6Z6IWTELt5+kGsAiveowjV0pFkKfj4/4ev293n/+fOfzdfXTq6e9f8L7sx2+sLGxsR/Cfr29cnbyu9U3JkGpfgcbGxt7KztJWnm6uvpm8ltn33t5HxsbG/tXspOjJEVF9fMkWWJjY2NjJ62iJDTVMqPaqMLGxsbGrjZrJvd7pU4vsR3opWFjY2P/ePapQe9P+PwN821sbGzsb2W/ile1qVRd1uk1pMoKbGxs7EXs5J/7XvsmLwDyVtThJ2BjY2OvYOdppnqgyTcPNIN6f2dsbGzsRezqiky1kMjHxpPzYGNjY/8e9mQJpjqC7RU/eUMqwmNjY2OvY8+bQckUtVquTAqSmzdiY2Njr2NPVht7o9k8ffbuR+MBbGxs7HXsPGFURwjveXnZMx8GR5tK2NjY2A9kT8qJJBD5M5P7ScK7CT02Njb2UvbZNlA1/VSDOxlCY2NjY+9jV8eoedKar+nMh8pRBYaNjY39WPapY00C0VvQyZ95WbRgY2NjL2L32kPV41ZDUy1FJk0xbGxs7OeyJ0VIvo7TK1Gqzab8MzY2NvYmdrLyMgecCkq1CRWVH9jY2NgPZ/eGtZOWfZIUe8OG5nwbGxsb++HsvJyYLNBUxwbRAmWxXClXMNjY2NgPYVeb9eW1mDjx9MYJ1Wf+k7exsbGxF7HnDfeodzWZP7daYDc7StjY2Ngr2Hlqqa7R9H6ap6s8HNHiDjY2NvZj2dUFnWqYeqs2k+9ET8DGxsZexK6OEPLGTa+532ta9YoTbGxs7B3svNjIE1t1YJzPXvMx8E3IsLGxsRexq8f6miQ3P1X0HGxsbOwV7EkBkLRseiGopsm8bXSzqYSNjY39WHbeuKm2h+YFQxUWlVXY2NjY69j5VQWUDxSEIGkq3ZwBGxsbexH7fxyrWmbk4auWQwcCgY2Njf0Qdp60cnZezJwqTsoDBmxsbOx17Hxc2isJJulnnoEvx73Y2NjYv4w9GfEmI9i8RdVLnM0Eho2Njb2UXUgVg/Wd6qAiCQQ2Njb2Vnb+ggmmNzauDhuStIeNjY29iV0d9PZKhd5bToUVGxsbeyn7DyEOO066ks0FAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



lazyScripts.push('//s95.cnzz.com/z_stat.php?id=1261860158&web_id=1261860158')

</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '小青年博客！';
            clearTimeout(titleTime);
        } else {
            document.title = '看似寻常最奇崛，成如容易却艰辛。';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



<script type="text/javascript">
    (function(p,u,s,h){
        p._pcq=p._pcq||[];
        p._pcq.push(['_currentTime',Date.now()]);
        s=u.createElement('script');
        s.type='text/javascript';
        s.async=true;
        s.src='https://cdn.pushcrew.com/js/84781173feeb9c46759523538d7dbfe0.js';
        h=u.getElementsByTagName('script')[0];
        h.parentNode.insertBefore(s,h);
    })(window,document);
</script>

</body>
</html>
