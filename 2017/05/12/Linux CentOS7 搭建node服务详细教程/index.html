<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>Linux CentOS7 搭建node服务详细教程 | 小青年博客 | 看似寻常最奇崛，成如容易却艰辛。</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Linux,CentOS7,node.js">
    <meta name="description" content="前言近期在准备搭建一个vue.js+node.js全栈开发的社区，之前由于没有云服务器搭建经验，这篇文章做一下相关的记录，后续再深入学习研究。本文不局限于只是流水账式的记录，会顺便说明一下Linux的相关内容。 登录Linux云服务器至于购买云服务的过程在此不做赘述，各大云服务提供商都有相关的说明文档。当我们买好了云主机，可以通过控制面板登录，也可以使用密码从本地登录。 Linux或Mac OS用">
<meta name="keywords" content="Linux,CentOS7,node.js">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux CentOS7 搭建node服务详细教程">
<meta property="og:url" content="https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/index.html">
<meta property="og:site_name" content="小青年博客">
<meta property="og:description" content="前言近期在准备搭建一个vue.js+node.js全栈开发的社区，之前由于没有云服务器搭建经验，这篇文章做一下相关的记录，后续再深入学习研究。本文不局限于只是流水账式的记录，会顺便说明一下Linux的相关内容。 登录Linux云服务器至于购买云服务的过程在此不做赘述，各大云服务提供商都有相关的说明文档。当我们买好了云主机，可以通过控制面板登录，也可以使用密码从本地登录。 Linux或Mac OS用">
<meta property="og:image" content="https://mccdn.qcloud.com/img56a5d38a4ffbc.png">
<meta property="og:image" content="https://mccdn.qcloud.com/img56a5d47b8b5da.png">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1945738-f6dd3886db0687d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/1945738-0ee150287b6c2bcd.png">
<meta property="og:updated_time" content="2017-05-17T09:13:52.942Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux CentOS7 搭建node服务详细教程">
<meta name="twitter:description" content="前言近期在准备搭建一个vue.js+node.js全栈开发的社区，之前由于没有云服务器搭建经验，这篇文章做一下相关的记录，后续再深入学习研究。本文不局限于只是流水账式的记录，会顺便说明一下Linux的相关内容。 登录Linux云服务器至于购买云服务的过程在此不做赘述，各大云服务提供商都有相关的说明文档。当我们买好了云主机，可以通过控制面板登录，也可以使用密码从本地登录。 Linux或Mac OS用">
<meta name="twitter:image" content="https://mccdn.qcloud.com/img56a5d38a4ffbc.png">
    
        <link rel="alternate" type="application/atom+xml" title="小青年博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">赵梦欢</h5>
          <a href="mailto:zhaomenghuan@foxmail.com" title="zhaomenghuan@foxmail.com" class="mail">zhaomenghuan@foxmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                首页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://zhaomenghuan.github.io/content.json" target="_blank" >
                <i class="icon icon-lg icon-th-large"></i>
                API
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zhaomenghuan" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                GitHub
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://segmentfault.com/u/zhaomenghuan" target="_blank" >
                <i class="icon icon-lg icon-link"></i>
                Segmentfault
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.jianshu.com/u/de1f0b8eaf18" target="_blank" >
                <i class="icon icon-lg icon-book"></i>
                简书
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Linux CentOS7 搭建node服务详细教程</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Linux CentOS7 搭建node服务详细教程</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-05-12T06:44:18.000Z" itemprop="datePublished" class="page-time">
  2017-05-12
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/node学习之路/">node学习之路</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#登录Linux云服务器"><span class="post-toc-number">2.</span> <span class="post-toc-text">登录Linux云服务器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-系统目录结构"><span class="post-toc-number">3.</span> <span class="post-toc-text">Linux 系统目录结构</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-文件基本属性"><span class="post-toc-number">4.</span> <span class="post-toc-text">Linux 文件基本属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Linux-文件与目录管理"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">Linux 文件与目录管理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-磁盘管理"><span class="post-toc-number">5.</span> <span class="post-toc-text">Linux 磁盘管理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-vim"><span class="post-toc-number">6.</span> <span class="post-toc-text">Linux vim</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-Yum-包管理器"><span class="post-toc-number">7.</span> <span class="post-toc-text">Linux Yum 包管理器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装及启动nginx"><span class="post-toc-number">8.</span> <span class="post-toc-text">安装及启动nginx</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-源码编译安装node-js"><span class="post-toc-number">9.</span> <span class="post-toc-text">Linux 源码编译安装node.js</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#通过Filezilla实现本地Windows上传文件到Linux服务器-从Linux服务器下载文件"><span class="post-toc-number">10.</span> <span class="post-toc-text">通过Filezilla实现本地Windows上传文件到Linux服务器/从Linux服务器下载文件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-Nginx-ssl证书部署"><span class="post-toc-number">11.</span> <span class="post-toc-text">Linux Nginx ssl证书部署</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Linux-node服务nginx配置"><span class="post-toc-number">12.</span> <span class="post-toc-text">Linux node服务nginx配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#参考"><span class="post-toc-number">13.</span> <span class="post-toc-text">参考</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-Linux CentOS7 搭建node服务详细教程"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Linux CentOS7 搭建node服务详细教程</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-05-12 14:44:18" datetime="2017-05-12T06:44:18.000Z"  itemprop="datePublished">2017-05-12</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/node学习之路/">node学习之路</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近期在准备搭建一个vue.js+node.js全栈开发的社区，之前由于没有云服务器搭建经验，这篇文章做一下相关的记录，后续再深入学习研究。本文不局限于只是流水账式的记录，会顺便说明一下Linux的相关内容。</p>
<h2 id="登录Linux云服务器"><a href="#登录Linux云服务器" class="headerlink" title="登录Linux云服务器"></a>登录Linux云服务器</h2><p>至于购买云服务的过程在此不做赘述，各大云服务提供商都有相关的说明文档。当我们买好了云主机，可以通过控制面板登录，也可以使用密码从本地登录。</p>
<p>Linux或Mac OS用户登录Linux云服务器，直接使用SSH命令进行连接，如：ssh root@Linux云服务器公网IP，然后输入root用户的初始密码，即可完成登录。</p>
<p>Window系统上 Linux 远程登录客户端有SecureCRT, Putty, SSH Secure Shell等，本文以Putty为例来登录远程服务器。</p>
<p>下载远程链接软件Putty，参考下载地址：<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank" rel="external">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a></p>
<p>打开Putty客户端，在PuTTY Configuration 窗口中输入以下内容：<br>Host Name：Linux云服务器的公网IP。<br>Port：云服务器的端口，必须填22。（请确保云主机22端口已开放）<br>Connect type：选择“SSH”。</p>
<p>全部输入完后，点击“Open”，创建一个新对话。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://mccdn.qcloud.com/img56a5d38a4ffbc.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>在Putty会话窗口中， 输入管理员帐号，按回车键。再输入初始密码，回车完成登录过程。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://mccdn.qcloud.com/img56a5d47b8b5da.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h2 id="Linux-系统目录结构"><a href="#Linux-系统目录结构" class="headerlink" title="Linux 系统目录结构"></a>Linux 系统目录结构</h2><p>登录系统后，在当前命令窗口下输入命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls /</div></pre></td></tr></table></figure></p>
<p>结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos ~]# ls /</div><div class="line">bin   data  etc   lib    lost+found  mnt  proc  run   srv  tmp  var</div><div class="line">boot  dev   home  lib64  media       opt  root  sbin  sys  usr</div></pre></td></tr></table></figure></p>
<p>树状目录结构：<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/1945738-f6dd3886db0687d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>以下是对这些目录的解释：<br><strong>/bin</strong>：bin是Binary的缩写, 这个目录存放着最经常使用的命令。<br><strong>/boot</strong>：这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。<br><strong>/dev</strong>：dev是Device(设备)的缩写, 该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。<br><strong>/etc</strong>：这个目录用来存放所有的系统管理所需要的配置文件和子目录。<br><strong>/home</strong>：用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。<br><strong>/lib</strong>：这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。<br><strong>/lost+found</strong>：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。<br><strong>/media</strong>：linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。<br><strong>/mnt</strong>：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。<br><strong>/opt</strong>：这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。<br><strong>/proc</strong>：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</div></pre></td></tr></table></figure></p>
<p><strong>/root</strong>：该目录为系统管理员，也称作超级权限者的用户主目录。<br><strong>/sbin</strong>：s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。<br><strong>/selinux</strong>：这个目录是Redhat/CentOS所特有的目录，Selinux是一个安全机制，类似于windows的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。<br><strong>/srv</strong>：该目录存放一些服务启动之后需要提取的数据。<br><strong>/sys</strong>：这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs 。sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。<br><strong>/tmp</strong>：这个目录是用来存放一些临时文件的。<br><strong>/usr</strong>：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。<br><strong>/usr/bin</strong>：系统用户使用的应用程序。<br><strong>/usr/sbin</strong>：超级用户使用的比较高级的管理程序和系统守护程序。<br><strong>/usr/src</strong>：内核源代码默认的放置目录。<br><strong>/var</strong>：这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</p>
<p>在linux系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。<br><strong>/etc</strong>： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。<br><strong>/bin, /sbin, /usr/bin, /usr/sbin</strong>: 这是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。值得提出的是，/bin, /usr/bin 是给系统用户使用的指令（除root外的通用户），而/sbin, /usr/sbin 则是给root使用的指令。<br><strong>/var</strong>： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在/var/log 目录下，另外mail的预设放置也是在这里。</p>
<p>了解系统目录结构，对于我们安装管理一些依赖包更加清晰。</p>
<h2 id="Linux-文件基本属性"><a href="#Linux-文件基本属性" class="headerlink" title="Linux 文件基本属性"></a>Linux 文件基本属性</h2><p>Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</p>
<p>在Linux中我们可以使用ll或者<code>ls –l</code>命令来显示一个文件的属性以及文件所属的用户和组，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@VM_195_14_centos ~]# ls -l</div><div class="line">total 4</div><div class="line">-rw-------. 1 root root 2523 Apr 21  2016 anaconda-ks.cfg</div></pre></td></tr></table></figure></p>
<p>实例中，anaconda-ks.cfg文件的第一个属性用”-“表示，”-“在Linux中代表该文件是一个文件。</p>
<p>在Linux中第一个字符代表这个文件是目录、文件或链接文件，对应规则如下：</p>
<ul>
<li>当为[ d ]则是目录</li>
<li>当为[ - ]则是文件；</li>
<li>若是[ l ]则表示为链接文档(link file)；</li>
<li>若是[ b ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；</li>
<li>若是[ c ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。</li>
</ul>
<p>接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合。其中，[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。</p>
<p>每个文件的属性由左边第一部分的10个字符来确定，如下图：</p>
{% image http://upload-images.jianshu.io/upload_images/1945738-a03a98765e603fb4.png '' '' %}
<h3 id="Linux-文件与目录管理"><a href="#Linux-文件与目录管理" class="headerlink" title="Linux 文件与目录管理"></a>Linux 文件与目录管理</h3><p>Linux的目录结构为树状结构，最顶级的目录为根目录 /。</p>
<p>绝对路径：从根目录 / 写起，如：/usr/share/applications<br>相对路径：使用../或~（/root的简称）。</p>
<p>处理目录的常用命令：</p>
<ul>
<li>ls: 列出目录</li>
<li>cd：切换目录</li>
<li>pwd：显示目前的目录</li>
<li>mkdir：创建一个新的目录</li>
<li>rmdir：删除一个空的目录</li>
<li>cp: 复制文件或目录</li>
<li>rm: 移除文件或目录</li>
</ul>
<p>注：可以使用 man [命令] 来查看各个命令的使用文档，如 ：man cp。</p>
<p>文件内容查看的命令：</p>
<ul>
<li>cat  由第一行开始显示文件内容</li>
<li>tac  从最后一行开始显示，可以看出 tac 是 cat 的倒著写！</li>
<li>nl   显示的时候，顺道输出行号！</li>
<li>more 一页一页的显示文件内容</li>
<li>less 与 more 类似，但是比 more 更好的是，他可以往前翻页！</li>
<li>head 只看头几行</li>
<li>tail 只看尾巴几行</li>
</ul>
<h2 id="Linux-磁盘管理"><a href="#Linux-磁盘管理" class="headerlink" title="Linux 磁盘管理"></a>Linux 磁盘管理</h2><p>inux磁盘管理常用三个命令为df、du和fdisk。</p>
<ul>
<li>df：列出文件系统的整体磁盘使用量</li>
<li>du：检查磁盘空间使用量</li>
<li>fdisk：用于磁盘分区</li>
</ul>
<p><strong> df 命令 </strong><br>df命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。<br>语法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df [-ahikHTm] [目录或文件名]</div></pre></td></tr></table></figure></p>
<p>选项与参数：<br>-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；<br>-k ：以 KBytes 的容量显示各文件系统；<br>-m ：以 MBytes 的容量显示各文件系统；<br>-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；<br>-H ：以 M=1000K 取代 M=1024K 的进位方式；<br>-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；<br>-i ：不用硬盘容量，而以 inode 的数量来显示</p>
<p><strong>du命令</strong><br>Linux du命令也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的，这里介绍Linux du命令。<br>语法：<br>du [-ahskm] 文件或目录名称<br>选项与参数：<br>-a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。<br>-h ：以人们较易读的容量格式 (G/M) 显示；<br>-s ：列出总量而已，而不列出每个各别的目录占用容量；<br>-S ：不包括子目录下的总计，与 -s 有点差别。<br>-k ：以 KBytes 列出容量显示；<br>-m ：以 MBytes 列出容量显示；</p>
<h2 id="Linux-vim"><a href="#Linux-vim" class="headerlink" title="Linux vim"></a>Linux vim</h2><p>Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。 vim 则可以说是程序开发者的一项很好用的工具。</p>
<p><a href="http://www.runoob.com/w3cnote/all-vim-cheatsheat.html" target="_blank" rel="external">史上最全Vim快捷键键位图（入门到进阶）</a></p>
{% image http://upload-images.jianshu.io/upload_images/1945738-1fe0b909665b1f09.png '' '' %}
<p><strong>打开文件的命令</strong></p>
{% image http://upload-images.jianshu.io/upload_images/1945738-43dee391c6bf6a74.png '' '' %}
<p>基本上 vim 共分为三种模式，分别是命令模式（Command mode），插入模式（Insert mode）和末行模式（Last line mode）。 这三种模式的作用分别是：命令模式、输入模式、末行模式。</p>
<p><strong>vi/vim三种模式切换</strong><br>{% image http://upload-images.jianshu.io/upload_images/1945738-8a3e2e194c142040.png 'vi/vim三种模式切换' '' %}</p>
<p><strong>命令模式</strong><br>用户刚刚启动 vi/vim，便进入了命令模式。此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。</p>
<p>以下是常用的几个命令：<br>i 切换到插入模式，以输入字符。<br>x 删除当前光标所在处的字符。<br>: 切换到底线命令模式，以在最底一行输入命令。</p>
<p>若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。<br>命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。</p>
<p>移动光标的位置：<br>{% image http://upload-images.jianshu.io/upload_images/1945738-6ef7c0c3957760d3.png '' '' %}</p>
<p>字符串的复制、删除、粘贴：<br>{% image http://upload-images.jianshu.io/upload_images/1945738-6872cedbde22d898.png '' '' %}</p>
<p><strong>输入模式</strong><br>在命令模式下按下i、I、a、A、o、O、r和R中的某一个键就进入了输入模式。<br>在输入模式中，可以使用以下按键：<br>字符按键以及Shift组合，输入字符<br>ENTER，回车键，换行<br>BACK SPACE，退格键，删除光标前一个字符<br>DEL，删除键，删除光标后一个字符<br>方向键，在文本中移动光标<br>HOME/END，移动光标到行首/行尾<br>Page Up/Page Down，上/下翻页<br>Insert，切换光标为输入/替换模式，光标将变成竖线/下划线<br>ESC，退出输入模式，切换到命令模式</p>
{% image http://upload-images.jianshu.io/upload_images/1945738-bd165fe4e4f95459.png '' '' %}
<p><strong>末行模式</strong><br>在命令模式下按下<code>:</code>（英文冒号）就进入了底线命令模式。<br>末行模式可以输入单个或多个字符的命令，可用的命令非常多。<br>在末行模式中，基本的命令有：<br>：q 退出程序<br>：w 保存文件<br>按ESC键可随时退出底线命令模式。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/1945738-0ee150287b6c2bcd.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p><strong>vim的保存文件和退出命令</strong></p>
<p><strong>:w</strong> —— 保存编辑后的文件内容，但不退出vim编辑器。这个命令的作用是把内存缓冲区中的数据写到启动vim时指定的文件中。<br><strong>:w!</strong> —— 强制写文件，即强制覆盖原有文件。如果原有文件的访问权限不允许写入文件，例如，原有的文件为只读文件，则可使用这个命令强制写入。但是，这种命令用法仅当用户是文件的属主时才适用，而超级用户则不受此限制。<br><strong>:wq</strong> —— 保存文件内容后退出vim编辑器。这个命令的作用是把内存缓冲区中的数据写到启动vim时指定的文件中，然后退出vim编辑器。另外一种替代的方法是用ZZ命令。<br><strong>:wq!</strong> —— 强制保存文件内容后退出vim编辑器。这个命令的作用是把内存缓冲区中的数据强制写到启动vim时指定的文件中，然后退出vim编辑器。<br><strong>ZZ</strong> —— 使用ZZ命令时，如果文件已经做过编辑处理，则把内存缓冲区中的数据写到启动vim时指定的文件中，然后退出vim编辑器。否则只是退出vim而已。注意，ZZ命令前面无需加冒号“：”，也无需按Enter键。<br><strong>:q</strong> —— 在未做任何编辑处理而准备退出vim时，可以使用此命令。如果已做过编辑处理，则vim不允许用户使用“:q”命令退出，同时还会输出下列警告信息：No write since last change (:quit! overrides)<br><strong>:q!</strong> —— 强制退出vim编辑器，放弃编辑处理的结果。如果确实不需要保存修改后的文件内容，可输入“:q!”命令，强行退出vim编辑器。<br><strong>:w filename</strong> —— 把编辑处理后的结果写到指定的文件中保存<br><strong>:w! filename</strong> —— 把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有的文件。<br><strong>:wq! filename</strong> —— 把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有文件，并退出vim编辑器。</p>
<h2 id="Linux-Yum-包管理器"><a href="#Linux-Yum-包管理器" class="headerlink" title="Linux Yum 包管理器"></a>Linux Yum 包管理器</h2><blockquote>
<p>Yum（全称为 Yellow dog Updater, Modified）是一个在Fedora和RedHat以及CentOS中的<a href="http://baike.baidu.com/item/Shell" target="_blank" rel="external">Shell</a>前端软件包管理器。基于<a href="http://baike.baidu.com/item/RPM" target="_blank" rel="external">RPM</a>包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</p>
</blockquote>
<p><strong>yum 语法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum [options] [command] [package ...]</div></pre></td></tr></table></figure></p>
<ul>
<li>options：可选，选项包括-h（帮助），-y（当安装过程提示选择全部为”yes”），-q（不显示安装的过程）等等。</li>
<li>command：要进行的操作。</li>
<li>package操作的对象。</li>
</ul>
<p><strong>yum常用命令</strong></p>
<ul>
<li>1.列出所有可更新的软件清单命令：yum check-update</li>
<li>2.更新所有软件命令：yum update</li>
<li>3.仅安装指定的软件命令：yum install <package_name></package_name></li>
<li>4.仅更新指定的软件命令：yum update <package_name></package_name></li>
<li>5.列出所有可安裝的软件清单命令：yum list</li>
<li>6.删除软件包命令：yum remove <package_name></package_name></li>
<li>7.查找软件包 命令：yum search <keyword></keyword></li>
<li>8.清除缓存命令:<ul>
<li>yum clean packages: 清除缓存目录下的软件包</li>
<li>yum clean headers: 清除缓存目录下的 headers</li>
<li>yum clean oldheaders: 清除缓存目录下旧的 headers</li>
<li>yum clean, yum clean all (= yum clean packages; yum clean oldheaders) :清除缓存目录下的软件包及旧的headers</li>
</ul>
</li>
</ul>
<h2 id="安装及启动nginx"><a href="#安装及启动nginx" class="headerlink" title="安装及启动nginx"></a>安装及启动nginx</h2><p>Nginx (“engine x”) 是一个高性能的 HTTP 和 反向代理服务器，也是一个 IMAP/POP3/SMTP 代理服务器。具有很有特性：</p>
<ul>
<li><strong>热部署</strong>：在master管理进程与worker工作进程的分离设计，使的Nginx具有热部署的功能，那么在7×24小时不间断服务的前提下，升级Nginx的可执行文件。也可以在不停止服务的情况下修改配置文件，更换日志文件等功能。</li>
<li><strong>可以高并发连接</strong>：理论上，Nginx支持的并发连接上限取决于你的内存，10万远未封顶。</li>
<li><strong>低的内存消耗</strong>：在一般的情况下，10000个非活跃的HTTP Keep-Alive 连接在Nginx中仅消耗2.5M的内存，这也是Nginx支持高并发连接的基础。</li>
<li><strong>处理响应请求很快</strong>：在正常的情况下，单次请求会得到更快的响应。在高峰期，Nginx可以比其他的Web服务器更快的响应请求。</li>
<li><strong>具有很高的可靠性</strong>：高可靠性来自其核心框架代码的优秀设计、模块设计的简单性；并且这些模块都非常的稳定。</li>
</ul>
<p>yum 安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install  -y nginx</div></pre></td></tr></table></figure></p>
<p>启动nginx服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service nginx start</div></pre></td></tr></table></figure></p>
<p>测试nginx服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://127.0.0.1</div></pre></td></tr></table></figure></p>
<p>若结果如下，说明nginx服务正常。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@VM_195_14_centos ~]# wget http://127.0.0.1</div><div class="line">--2017-05-11 20:32:34--  http://127.0.0.1/</div><div class="line">Connecting to 127.0.0.1:80... connected.</div><div class="line">HTTP request sent, awaiting response... 200 OK</div><div class="line">Length: 3700 (3.6K) [text/html]</div><div class="line">Saving to: &apos;index.html&apos;</div><div class="line"></div><div class="line">100%[======================================&gt;] 3,700       --.-K/s   in 0s</div><div class="line"></div><div class="line">2017-05-11 20:32:34 (632 MB/s) - &apos;index.html&apos; saved [3700/3700]</div></pre></td></tr></table></figure></p>
<p>在浏览器中，访问通过CentOS云服务器公网IP查看nginx服务是否正常运行。</p>
<p><strong>nginx 服务器命令</strong><br>启动nginx：service nginx start<br>访问（nginx默认是80端口）：curl 127.0.0.1<br>nginx配置文件目录：nginx -t<br>重启nginx：service nginx restart<br>停用nginx：service nginx stop</p>
<h2 id="Linux-源码编译安装node-js"><a href="#Linux-源码编译安装node-js" class="headerlink" title="Linux 源码编译安装node.js"></a>Linux 源码编译安装node.js</h2><p>开篇说了我会尝试建立一个vue.js+node.js全栈开发的交流社区，自然这个站点会基于node.js构建后端。</p>
<p>Linux下node有多种安装方式，这里我们手工安装官方最新版本。</p>
<p><strong>1.安装编译环境</strong><br>我的CentOS版本是7.2，安装前先安装编译环境，如gcc编译器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y gcc gcc-c++ openssl-devel</div></pre></td></tr></table></figure></p>
<p>然后执行<code>gcc -v</code>运行正常：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">gcc version 4.8.5 20150623 (Red Hat 4.8.5-11) (GCC)</div></pre></td></tr></table></figure></p>
<p><strong>2.检查和核对Python版本</strong><br>Node.js环境需要Python2.6以上，我们需要检查，如果不是则需要安装和升级最新版Python。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python</div></pre></td></tr></table></figure></p>
<p>退出python命令行使用exit() 命令或者Ctrl-D快捷键。</p>
<p><strong>3.安装最新版本Node.js</strong></p>
<p>我们将我们的node下载到/usr/local/src文件夹下进行安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src</div></pre></td></tr></table></figure></p>
<p>下载：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://nodejs.org/dist/node-latest.tar.gz</div></pre></td></tr></table></figure></p>
<p>解压：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf node-latest.tar.gz</div></pre></td></tr></table></figure></p>
<p>进入当前版本进行编译，先通过ls查询解压的文件夹名：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@VM_195_14_centos src]# ls</div><div class="line">node-latest.tar.gz  node-v7.10.0</div></pre></td></tr></table></figure></p>
<p>然后进入node-v7.10.0文件夹进行安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd node-v0.12.7</div><div class="line">./configure</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure></p>
<p>然后检查node是否正确安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node -v</div></pre></td></tr></table></figure></p>
<p>如果正确打印出版本则正确安装。</p>
<h2 id="通过Filezilla实现本地Windows上传文件到Linux服务器-从Linux服务器下载文件"><a href="#通过Filezilla实现本地Windows上传文件到Linux服务器-从Linux服务器下载文件" class="headerlink" title="通过Filezilla实现本地Windows上传文件到Linux服务器/从Linux服务器下载文件"></a>通过Filezilla实现本地Windows上传文件到Linux服务器/从Linux服务器下载文件</h2><p>本方法仅适合本地为Windows系统的用户，可实现将本地文件上传至Linux服务器/下载Linux服务器上的文件。本地为Linux系统的用户可直接使用SCP命令进行上传下载。<br>本地安装Filezilla客户端，参考下载地址：<a href="https://www.filezilla.cn/download/client" target="_blank" rel="external">https://www.filezilla.cn/download/client</a></p>
<p>点击【文件】-【站点管理器】，点击【新站点】按钮，输入以下内容：<br>{% image https://mccdn.qcloud.com/static/img/58132d70663ac9ce5169462eb9ccb944/image.png '' '' %}<br>主机：Linux云服务器的公网IP<br>端口：远程连接端口，默认22<br>协议：选择【SFTP】ssh文件传输协议<br>登录类型：选择正常<br>用户：Linux云服务器的登录用户，默认为root/ubuntu<br>密码：Linux云服务器的登录密码</p>
<p>点击【连接】按钮，等待连接Linux云服务器。<br>{% image https://mccdn.qcloud.com/static/img/6653190a5e08b34c83d1f3d9ed9a84f6/image.png '' '' %}<br>连接成功后，左侧为本地文件，右侧为服务器端文件。<br>需要上传本地文件至服务器时，在左侧需要上传的文件上右键单击【上传】按钮，文件即可上传到右侧服务器文件目录下；<br>需要下载服务器文件至本地时，在右侧需要下载的文件上右键单击【下载】按钮，文件即可下载到左侧本地文件目录下；</p>
<h2 id="Linux-Nginx-ssl证书部署"><a href="#Linux-Nginx-ssl证书部署" class="headerlink" title="Linux Nginx ssl证书部署"></a>Linux Nginx ssl证书部署</h2><p>我是在腾讯云上部署的，在这里申请免费的SSL证书：<a href="https://console.qcloud.com/ssl" target="_blank" rel="external">申请免费证书</a>。申请完了后下载证书然后可以利用上面说的Filezilla上传到服务器上，参考这里的文档<a href="https://www.qcloud.com/document/product/400/4143#2.-nginx-.E8.AF.81.E4.B9.A6.E9.83.A8.E7.BD.B2" target="_blank" rel="external">Nginx 证书部署</a>。</p>
<ul>
<li>下载解压证书，Nginx文件夹内获得SSL证书文件 1_www.domain.com_bundle.crt 和私钥文件 2_www.domain.com.key,<br>1_www.domain.com_bundle.crt 文件包括两段证书代码 “—–BEGIN CERTIFICATE—–”和“—–END CERTIFICATE—–”,<br>2_www.domain.com.key 文件包括一段私钥代码“—–BEGIN RSA PRIVATE KEY—–”和“—–END RSA PRIVATE KEY—–”。</li>
<li>将域名 www.domain.com 的证书文件1_www.domain.com_bundle.crt 、私钥文件2_www.domain.com.key保存到同一个目录，例如/usr/share/nginx/conf目录下。</li>
<li>更新Nginx根目录下conf/nginx.conf 文件。</li>
</ul>
<p>这里重点说说更新nginx.conf文件，新手一般不知道nginx.conf的位置，这时候我们就需要使用nginx -t来查找nginx配置文件，并使用vi命令修改该配置文件，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@VM_195_14_centos ~]# nginx -t</div><div class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</div><div class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</div></pre></td></tr></table></figure></p>
<p>打开 vim 修改nginx.conf文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/nginx/nginx.conf</div></pre></td></tr></table></figure></p>
<p>主要修改server：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">  listen 443;</div><div class="line">  server_name www.domain.com; #填写绑定证书的域名</div><div class="line">  ssl on;</div><div class="line">  ssl_certificate /usr/share/nginx/conf/1_www.domain.com_bundle.crt;</div><div class="line">  ssl_certificate_key /usr/share/nginx/conf/2_www.domain.com.key;</div><div class="line">  ssl_session_timeout 5m;</div><div class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置</div><div class="line">  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置  </div><div class="line">  ssl_prefer_server_ciphers on;</div><div class="line">  #其他不修改...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>配置完成后，正确无误的话，重启nginx。就可以使 <a href="https://www.domain.com" target="_blank" rel="external">https://www.domain.com</a> 来访问了。</p>
<p>注：（配置关键字段）</p>
<table>
<thead>
<tr>
<th style="text-align:center">配置文件参数</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">listen 443</td>
<td style="text-align:center">SSL访问端口号为443</td>
</tr>
<tr>
<td style="text-align:center">ssl on</td>
<td style="text-align:center">启用SSL功能</td>
</tr>
<tr>
<td style="text-align:center">ssl_certificate</td>
<td style="text-align:center">证书文件</td>
</tr>
<tr>
<td style="text-align:center">ssl_certificate_key</td>
<td style="text-align:center">私钥文件</td>
</tr>
<tr>
<td style="text-align:center">ssl_protocols</td>
<td style="text-align:center">使用的协议</td>
</tr>
<tr>
<td style="text-align:center">ssl_ciphers</td>
<td style="text-align:center">配置加密套件，写法遵循openssl标准</td>
</tr>
</tbody>
</table>
<h2 id="Linux-node服务nginx配置"><a href="#Linux-node服务nginx配置" class="headerlink" title="Linux node服务nginx配置"></a>Linux node服务nginx配置</h2><p>前面我们已经正确下载了node环境，这里我们写一个简单的node程序开启一个node服务。</p>
{% image http://upload-images.jianshu.io/upload_images/1945738-456d2a56f7fcc3f5.png '' '' %}
<p>使用<code>vim /var/www/index.js</code>在/var/www文件夹下建立一个index.js，起一个最简单的服务。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">const http = require(&apos;http&apos;);</div><div class="line">const server = http.createServer((req, res) =&gt; &#123;</div><div class="line">  res.statusCode = 200;</div><div class="line">  res.setHeader(&apos;Content-Type&apos;, &apos;text/plain&apos;);</div><div class="line">  res.end(&apos;Hello World\n&apos;);</div><div class="line">&#125;);</div><div class="line">server.listen(3000, () =&gt; &#123;</div><div class="line">  console.log(`node server is now running/`);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>nodejs默认端口是3000，需要配置nginx反向代理到nodejs的3000端口。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       443;</div><div class="line">    server_name  www.domain.com;</div><div class="line">    ssl on;</div><div class="line">    ssl_certificate /usr/share/nginx/conf/1_www.vuenode.com_bundle.crt;</div><div class="line">    ssl_certificate_key /usr/share/nginx/conf/2_www.vuenode.com.key;</div><div class="line">    ssl_session_timeout 5m;</div><div class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</div><div class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</div><div class="line">    ssl_prefer_server_ciphers on;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        proxy_pass http://127.0.0.1:3000;</div><div class="line">        proxy_http_version 1.1;</div><div class="line">        proxy_set_header Upgrade $http_upgrade;</div><div class="line">        proxy_set_header Connection ‘upgrade’;</div><div class="line">        proxy_set_header Host $host;</div><div class="line">        proxy_cache_bypass $http_upgrade;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后重启nginx及打开node服务：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">service nginx restart</div><div class="line">node /var/www/index</div></pre></td></tr></table></figure></p>
<p>我们打开浏览器，页面页面会出现 hello world，至此我们的node服务已经搭建完成。这里需要说明的是我们容易产生一个误区的是 node 提供了 https 模块，我们在构建node服务的时候是使用 http 模块还是 https 模块，如果我们之间使用 node 做服务，不经过nginx反向代理，确实是可以使用 https 模块，不过这里我们使用了nginx对外部访问的时候是使用 https，服务器内部使用http模块即可。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.runoob.com/linux/linux-tutorial.html" target="_blank" rel="external">Linux 教程</a><br><a href="http://www.tuicool.com/articles/NZz2ii" target="_blank" rel="external">Linux学习笔记：5.Vim编辑器(2)：三种模式和命令</a><br><a href="http://www.tuicool.com/articles/VV7nim6" target="_blank" rel="external">我们为什么要用nginx，nginx的特点</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-05-17T09:13:52.942Z" itemprop="dateUpdated">2017-05-17 17:13:52</time>
</span><br>


        
        转载需标注本文原始地址：<a href="/2017/05/12/Linux CentOS7 搭建node服务详细教程/" target="_blank" rel="external">https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/</a>
        
    </div>
    <footer>
        <a href="https://zhaomenghuan.github.io">
            <img src="/img/avatar.png" alt="赵梦欢">
            赵梦欢
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS7/">CentOS7</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&title=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&pic=https://zhaomenghuan.github.io/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&title=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&source=小青年,小青年博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&via=https://zhaomenghuan.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/05/17/从0到1搭建webpack2-vue2自定义模板详细教程/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">从0到1搭建webpack2+vue2自定义模板详细教程</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/05/04/cordova研习笔记(二)——cordova 6.X 源码解读（上）/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">cordova研习笔记(二) —— cordova 6.X 源码解读</h4>
      </a>
    </div>
  
</nav>



    













</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        感谢老铁~
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        <li>
            <img src="/img/wechat.png" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="/img/alipay.png" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>赵梦欢 &copy; 2015 - 2017</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&title=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&pic=https://zhaomenghuan.github.io/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&title=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&source=小青年,小青年博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Linux CentOS7 搭建node服务详细教程》 — 小青年博客&url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/&via=https://zhaomenghuan.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://zhaomenghuan.github.io/2017/05/12/Linux CentOS7 搭建node服务详细教程/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADI0lEQVR42u3aS47bQAwFQN//0s42QGD5PdIGrE5pNchopC5qwfDzeMTX868rv+ff+6/vefX867dfn2p1YWNjY9+E/by8Xt3TBig59HWYkvMkFmxsbOxT2e2B8nuSlJOnuuRfoiSHjY2NjR0ktus0c51y8mBhY2NjY7fsz5Yus6IIGxsbG3v/snZIkCS5vKTZfBJsbGzs89htG+iXf/7KfBsbGxv7h9nP8pqNdTfJL1/ZKRTY2NjYB7Hb//pvipZZyfGp52BjY2Ofym5HuUlCmo0E2qFv/nmKugobGxv7huxZMZCnk+s7N8s37RvfhAAbGxv75uy80TNLYwk+SV1tA+sNHhsbG/sIdvKaNhD50/YlzXD0i42NjX0oezN2TYqTZKiwKWkSCzY2NvbZ7LaxnjeA8kIiL402ocHGxsY+iT1r9LSt/Lx5tBkttOHGxsbGPom9eXSe/Gajgm8nS2xsbOwz2O3rNy2hfJCQjwfy0mXVM8PGxsb+Yfbm1tkazWyQnP/V0IWNjY19c/ZmgXKWZlrYh9tJ2NjY2Mex2wbQZiT82TAlg4cib2NjY2Pfip2kqHyNctNayu+ZPeHRZmZsbGzsm7DbdNW+8ho/S2x5QN+EDxsbG/s4dlIYJMmsPVabPjepFBsbG/s8dn70/RC3LV3yoOTnxMbGxj6bPVvfaVtReTEzaxhF6RAbGxv7IHbbUs+PFb14PTDOS5R63wcbGxv7huw2GeRprF3QyZtTyfUmgWFjY2PfnJ20fnJw2wbKB8yzcujlqbCxsbEPYs9aObOiZVaizAbPUTiwsbGxD2XPlmy+vabzqZSGjY2N/X+y2yPmDaDZetBqWWfzbbGxsbFvyG7XZfJypQW0CSwKKzY2NvYR7Gd5bYavOaxtb7UjDWxsbOyT2LPFlyRk7ZBgFpp2/FCHABsbG/sm7BmgWI5ZhLVNVEXgsLGxsY9jt72otrkzW7XZhxIbGxsbuy0SZgVJ2+TKixBsbGxs7P1x83JiNjCeJU5sbGzs89h5wdCu4Gx+2w4JijUjbGxs7IPYm4WbdilnNm1OPkD7MbCxsbGPYP8BlqrEcPW44qQAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



lazyScripts.push('//s95.cnzz.com/z_stat.php?id=1261860158&web_id=1261860158')

</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '小青年博客！';
            clearTimeout(titleTime);
        } else {
            document.title = '看似寻常最奇崛，成如容易却艰辛。';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



<script type="text/javascript">
    (function(p,u,s,h){
        p._pcq=p._pcq||[];
        p._pcq.push(['_currentTime',Date.now()]);
        s=u.createElement('script');
        s.type='text/javascript';
        s.async=true;
        s.src='https://cdn.pushcrew.com/js/84781173feeb9c46759523538d7dbfe0.js';
        h=u.getElementsByTagName('script')[0];
        h.parentNode.insertBefore(s,h);
    })(window,document);
</script>

</body>
</html>
